(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{367:function(e,t,a){e.exports=a.p+"static/media/admin.39132ce0.png"},382:function(e,t,a){e.exports=a(736)},387:function(e,t,a){},389:function(e,t,a){},446:function(e,t){},448:function(e,t){},459:function(e,t){},461:function(e,t){},490:function(e,t){},492:function(e,t){},493:function(e,t){},499:function(e,t){},501:function(e,t){},520:function(e,t){},532:function(e,t){},535:function(e,t){},677:function(e,t){},736:function(e,t,a){"use strict";a.r(t);Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),a=t.length,n=new Array(a);a--;)n[a]=[t[a],e[t[a]]];return n}),Object.values||(Object.values=function(e){return Object.keys(e).map(function(t){return e[t]})}),String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var a=Object(this),n=a.length>>>0;if(0===n)return!1;for(var s,l,r=0|t,o=Math.max(r>=0?r:n-Math.abs(r),0);o<n;){if((s=a[o])===(l=e)||"number"===typeof s&&"number"===typeof l&&isNaN(s)&&isNaN(l))return!0;o++}return!1}});var n,s,l=a(0),r=a.n(l),o=a(24),c=a.n(o),i=(a(387),a(6)),m=a(7),d=a(9),p=a(8),u=a(10),h=(a(389),a(785)),g=a(797),b=a(569),E=a(12),f=a(226),v=a(25),_=a(357),y=a(30),k=a(66),N=a(16),C="SET_CURRENT_USER",O="LOGOUT",j={users:[],registered_users:[],roles:[],errors:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_USERS":return Object(N.a)({},e,{users:t.payload,errors:[]});case"LIST_REGISTERED_USERS":return Object(N.a)({},e,{registered_users:t.payload});case"LIST_USER_ROLES":return Object(N.a)({},e,{roles:t.payload,errors:[]});case"ADD_EDIT_USER_ERROR":return Object(N.a)({},e,{errors:t.payload});default:return e}},I={errors:[],success:""},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ERROR_MESSAGES":return Object(N.a)({},e,{errors:t.payload});case"CLEAR_MESSAGES":return Object(N.a)({},e,{errors:[],success:""});case"ADD_SUCCESS_MESSAGE":return Object(N.a)({},e,{success:t.payload});default:return e}},w=a(5),A={en:{sidemenu:{tasks:"Tasks",checkpoints:"Checkpoints",my_tasks:"My tasks",admin:"Admin",dashboard:"Dashboard"},common:{next:"Next",from:"From",to:"To",completed:"Completed",no_internet:"No internet connection",back:"Back",id:"Id",dashboard:"Dashboard",name:"Name",status:"Status",action:"Action",client:"Client",date:"Date",active:"Active",inactive:"Inactive",description:"Description",yes:"Yes",no:"No",add:"Add",cancel:"Cancel",save:"Save",delete:"Delete",close:"Close",edit:"Edit",download:"Download",value:"Value",role:"Role",filter:"Filter",place:"Place",rotation_start_date:"Rotation start date",rotation_start_date_info:"",rotation_days_count:"Rotation days count",rotation_days_count_info:"",deleted:"Deleted",user:"User"},tasks:{title:"Tasks",description:"Description",rotation_start_date:"Rotation start date",rotation_days_count:"Rotation days count",times_per_day_of_task_execution:"Times per day",users:"Users for the task",checkpoint:"Checkpoint",not_completed:"Not completed",completed:"Completed"},checkpoints:{title:"Checkpoints",generate_qr:"Generate new QR",tasks_for_checkpoint:"Tasks",add_task:"Add task",add:"Add checkpoint"},places:(n={title:"Places",add:"Add place",edit:"Edit place",ordertypes:"Order types"},Object(w.a)(n,"edit","Edit"),Object(w.a)(n,"delete",{title:"Delete place",confirm:"Are you sure you want to delete "}),n),messages:{errors:{invalid_code:"Invalid code",invalid_name:"Invalid name",invalid_email:"Invalid email",invalid_role:"Invalid role",no_data_to_insert:"Empty data",invalid_place:"Invalid place",invalid_credentials:"Invalid credentials"}},users:{add:"Add user",edit:"Edit user",email:"Email",password:"Password",date_of_registration:"Registration date",fullname:"Full name",phone:"Phone"},roles:{SUPER_ADMIN:"Super Admin",CLIENT_ADMIN:"All places Admin",PLACE_ADMIN:"One place Admin",USER:"User"},clients:{title:"Clients",add:"Add client",edit:"Edit client",delete:{title:"Delete client",confirm:"Are you sure you want to delete "},contract_start_date:"Contract start date",trial_start_date:"Trial start date",trial_end_date:"Trial end date",monthly_fee:"Monthly fee",address:"Address",additional_info:"Additional info",owner_name:"Owner's name"},login:{title:"Login",email:"Email",password:"Password",login:"Login"}},bg:{sidemenu:{my_tasks:"\u041c\u043e\u0438\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",tasks:"\u0417\u0430\u0434\u0430\u0447\u0438",checkpoints:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438",admin:"\u0410\u0434\u043c\u0438\u043d",dashboard:"\u041d\u0430\u0447\u0430\u043b\u043e",administration:"\u0410\u0434\u043c\u0438\u043d",users:"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0438",system:"\u0421\u0438\u0441\u0442\u0435\u043c\u043d\u0438",super_admin:"\u0421\u0443\u043f\u0435\u0440 \u0430\u0434\u043c\u0438\u043d",current_place:"\u0422\u0435\u043a\u0443\u0449 \u043e\u0431\u0435\u043a\u0442",clients:"\u041a\u043b\u0438\u0435\u043d\u0442\u0438",place:"\u041e\u0431\u0435\u043a\u0442",places:"\u041e\u0431\u0435\u043a\u0442\u0438"},common:{next:"\u0421\u043b\u0435\u0434\u0432\u0430\u0449",from:"\u041e\u0442",to:"\u0414\u043e",no_internet:"\u041b\u0438\u043f\u0441\u0432\u0430 \u0432\u0440\u044a\u0437\u043a\u0430 \u0441 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442",back:"\u041d\u0430\u0437\u0430\u0434",title:"\u0417\u0430\u0433\u043b\u0430\u0432\u0438\u0435",id:"\u041d\u043e\u043c\u0435\u0440",dashboard:"\u041d\u0430\u0447\u0430\u043b\u043e",name:"\u0418\u043c\u0435",status:"\u0421\u0442\u0430\u0442\u0443\u0441",action:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435",client:"\u041a\u043b\u0438\u0435\u043d\u0442",date:"\u0414\u0430\u0442\u0430",active:"\u0410\u043a\u0442\u0438\u0432\u043d\u0430",inactive:"\u041d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u0430",description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",image:"\u0421\u043d\u0438\u043c\u043a\u0430",yes:"\u0414\u0430",no:"\u041d\u0435",add:"\u0414\u043e\u0431\u0430\u0432\u0438",cancel:"\u041e\u0442\u043a\u0430\u0436\u0438",save:"\u0417\u0430\u043f\u0430\u0437\u0438",delete:"\u0418\u0437\u0442\u0440\u0438\u0439",close:"\u0417\u0430\u0442\u0432\u043e\u0440\u0438",edit:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u0439",download:"\u0421\u0432\u0430\u043b\u0438",role:"\u0420\u043e\u043b\u044f",filter:"\u0424\u0438\u043b\u0442\u044a\u0440",place:"\u041e\u0431\u0435\u043a\u0442",rotation_start_date:"\u041d\u0430\u0447\u0430\u043b\u043d\u0430 \u0434\u0430\u0442\u0430 \u043d\u0430 \u0440\u043e\u0442\u0430\u0446\u0438\u044f",rotation_start_date_info:"",rotation_days_count:"\u0414\u043d\u0438 \u043d\u0430 \u0440\u043e\u0442\u0430\u0446\u0438\u044f",rotation_days_count_info:"",deleted:"\u0418\u0437\u0442\u0440\u0438\u0442",user:"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b"},tasks:{title:"\u0417\u0430\u0434\u0430\u0447\u0438",description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",rotation_start_date:"\u041d\u0430\u0447\u0430\u043b\u043d\u0430 \u0434\u0430\u0442\u0430 \u043d\u0430 \u0438\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0438\u0435",rotation_days_count:"\u041f\u0440\u0435\u0437 \u043a\u043e\u043b\u043a\u043e \u0434\u043d\u0438 \u0434\u0430 \u0441\u0435 \u0438\u0437\u043f\u044a\u043b\u043d\u044f\u0432\u0430",times_per_day_of_task_execution:"\u0411\u0440\u043e\u0439 \u0438\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0438\u044f \u043d\u0430 \u0434\u0435\u043d",users:"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0438 \u0438\u0437\u043f\u044a\u043b\u043d\u044f\u0432\u0430\u0449\u0438 \u0437\u0430\u0434\u0430\u0447\u0430\u0442\u0430",complete_tasks:"\u0418\u0437\u043f\u044a\u043b\u043d\u0438",completed:"\u0418\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430",not_completed:"\u041d\u0435\u0438\u0437\u043f\u044a\u043b\u043d\u0435\u043d\u0430",checkpoint:"\u041b\u043e\u043a\u0430\u0446\u0438\u044f"},checkpoints:{title:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438",generate_qr:"\u0413\u0435\u043d\u0435\u0440\u0438\u0440\u0430\u0439 \u043d\u043e\u0432 QR",tasks_for_checkpoint:"\u0417\u0430\u0434\u0430\u0447\u0438",add_task:"\u0414\u043e\u0431\u0430\u0432\u0438 \u0437\u0430\u0434\u0430\u0447\u0430",add:"\u0414\u043e\u0431\u0430\u0432\u0438 \u043b\u043e\u043a\u0430\u0446\u0438\u044f"},versions:{features_about_version:"\u041d\u043e\u0432\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u043d\u043e\u0441\u0442\u0438 \u0437\u0430 \u0432\u0435\u0440\u0441\u0438\u044f:",version:"\u0412\u0435\u0440\u0441\u0438\u044f"},places:(s={title:"\u041e\u0431\u0435\u043a\u0442\u0438",add:"\u0414\u043e\u0431\u0430\u0432\u0438 \u043e\u0431\u0435\u043a\u0442",edit:"\u041f\u0440\u043e\u043c\u044f\u043d\u0430 \u043d\u0430 \u043e\u0431\u0435\u043a\u0442",ordertypes:"\u0422\u0438\u043f\u043e\u0432\u0435 \u043f\u043e\u0440\u044a\u0447\u043a\u0430"},Object(w.a)(s,"edit","\u041f\u0440\u043e\u043c\u044f\u043d\u0430"),Object(w.a)(s,"delete",{title:"\u0418\u0437\u0442\u0440\u0438\u0439 \u043e\u0431\u0435\u043a\u0442",confirm:"\u0421\u0438\u0433\u0443\u0440\u0435\u043d \u043b\u0438 \u0441\u0438, \u0447\u0435 \u0438\u0441\u043a\u0430\u0448 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0448 \u043e\u0431\u0435\u043a\u0442\u0430 "}),Object(w.a)(s,"init_settings_for_all_places","\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u0430\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\u0442\u0435 \u0437\u0430 \u0432\u0441\u0438\u0447\u043a\u0438 \u043e\u0431\u0435\u043a\u0442\u0438"),Object(w.a)(s,"functionality_modules","\u0424\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u043d\u0438 \u043c\u043e\u0434\u0443\u043b\u0438"),Object(w.a)(s,"sms_logs","SMS-\u0438 \u043f\u043e \u043c\u0435\u0441\u0435\u0446\u0438"),Object(w.a)(s,"additional_info","\u0414\u043e\u043f\u044a\u043b\u043d\u0438\u0442\u0435\u043b\u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f (\u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043a\u0438)"),Object(w.a)(s,"company_email","\u0418\u043c\u0435\u0439\u043b"),Object(w.a)(s,"lat","Lat"),Object(w.a)(s,"lng","Lng"),s),messages:{errors:{invalid_name:"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u043e \u0438\u043c\u0435",invalid_email:"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u043c\u0435\u0439\u043b",invalid_role:"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u0430 \u0440\u043e\u043b\u044f",you_must_select_place:"\u0422\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0438\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0431\u0435\u043a\u0442",invalid_place:"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u043e\u0431\u0435\u043a\u0442",invalid_credentials:"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u0438 \u0434\u0430\u043d\u043d\u0438 \u0437\u0430 \u0432\u0445\u043e\u0434","Wrong checkpoint for task":"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u044f \u0437\u0430 \u0437\u0430\u0434\u0430\u0447\u0430\u0442\u0430"}},users:{add:"\u0414\u043e\u0431\u0430\u0432\u0438",edit:"\u041f\u0440\u043e\u043c\u0435\u043d\u0438",email:"\u0418\u043c\u0435\u0439\u043b",password:"\u041f\u0430\u0440\u043e\u043b\u0430",date_of_registration:"\u0414\u0430\u0442\u0430 \u043d\u0430 \u0441\u044a\u0437\u0434\u0430\u0432\u0430\u043d\u0435",fullname:"\u0418\u043c\u0435",phone:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"},roles:{SUPER_ADMIN:"\u0421\u0443\u043f\u0435\u0440 \u0410\u0434\u043c\u0438\u043d",CLIENT_ADMIN:"\u0410\u0434\u043c\u0438\u043d \u043d\u0430 \u0432\u0441\u0438\u0447\u043a\u0438 \u043e\u0431\u0435\u043a\u0442\u0438",PLACE_ADMIN:"\u0410\u0434\u043c\u0438\u043d \u043d\u0430 \u043e\u0431\u0435\u043a\u0442",USER:"\u041e\u0431\u0438\u043a\u043d\u043e\u0432\u0435\u043d \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b"},clients:{title:"\u041a\u043b\u0438\u0435\u043d\u0442\u0438",add:"\u0414\u043e\u0431\u0430\u0432\u0438 \u043a\u043b\u0438\u0435\u043d\u0442",edit:"\u041f\u0440\u043e\u043c\u044f\u043d\u0430 \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442",delete:{title:"\u0418\u0437\u0442\u0440\u0438\u0439 \u043a\u043b\u0438\u0435\u043d\u0442",confirm:"\u0421\u0438\u0433\u0443\u0440\u0435\u043d \u043b\u0438 \u0441\u0438, \u0447\u0435 \u0438\u0441\u043a\u0430\u0448 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0448 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 "},contract_start_date:"\u0414\u043e\u0433\u043e\u0432\u043e\u0440: \u043d\u0430\u0447\u0430\u043b\u043d\u0430 \u0434\u0430\u0442\u0430",trial_start_date:"\u0422\u0435\u0441\u0442\u043e\u0432 \u043f\u0435\u0440\u0438\u043e\u0434: \u043d\u0430\u0447\u0430\u043b\u043e",trial_end_date:"\u0422\u0435\u0441\u0442\u043e\u0432 \u043f\u0435\u0440\u0438\u043e\u0434: \u043a\u0440\u0430\u0439",monthly_fee:"\u041c\u0435\u0441\u0435\u0447\u043d\u0430 \u0442\u0430\u043a\u0441\u0430",address:"\u0410\u0434\u0440\u0435\u0441",additional_info:"\u0414\u043e\u043f\u044a\u043b\u043d\u0438\u0442\u0435\u043b\u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f (\u0434\u043e\u0433\u043e\u0432\u043e\u0440\u043a\u0438)",owner_name:"\u0418\u043c\u0435 \u043d\u0430 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u0438\u043a"},login:{title:"\u0412\u043b\u0435\u0437 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0430 \u0441\u0438",email:"\u0418\u043c\u0435\u0439\u043b",password:"\u041f\u0430\u0440\u043e\u043b\u0430",login:"\u0412\u043b\u0435\u0437"}}},T=localStorage.getItem("default_lang")&&A[localStorage.getItem("default_lang")]?A[localStorage.getItem("default_lang")]:A.bg,M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SWITCH_LANGUAGE":return A[t.language]?A[t.language]:A.bg;default:return e}},L=a(164),P=a(358),F=a.n(P),D={isAuthenticated:!1,user:{},auth_error:""},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return{isAuthenticated:!F()(t.user),user:t.user};default:return e}},U={places:[],ordertypes:[],functionality_modules:[],places_sms_logs:[],cities:[]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_PLACES":return Object(N.a)({},e,{places:t.payload});case"LIST_ORDERTYPES":return Object(N.a)({},e,{ordertypes:t.payload});case"LIST_FUNCTIONALITY_MODULES":return Object(N.a)({},e,{functionality_modules:t.payload});case"GET_PLACES_SMS":return Object(N.a)({},e,{places_sms_logs:t.payload});case"GET_CITIES":return Object(N.a)({},e,{cities:t.payload});default:return e}},W={clients:[]},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_CLIENTS":return Object(N.a)({},e,{clients:t.payload});default:return e}},q={isLoading:!1},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_LOADING":return Object(N.a)({},e,{isLoading:!0});case"HIDE_LOADING":return Object(N.a)({},e,{isLoading:!1});default:return e}},G={row:"box",box:"row"},z={soundActivated:!1,orderStyleType:"row",snackbarText:"",snackbarActionCallback:function(){},snackbarActionText:"",openConfirmModal:!1,confirmModalText:"",confirmModalCallbackSuccess:function(){},confirmModalCallbackFail:function(){}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SOUND_ACTIVATION":return Object(N.a)({},e,{soundActivated:t.payload});case"CHANGE_ORDER_STYLE_TYPE":return Object(N.a)({},e,{orderStyleType:G[e.orderStyleType]});case"SET_SNACKBAR_TEXT":return Object(N.a)({},e,{snackbarText:t.payload.text,snackbarActionText:t.payload.actionText,snackbarActionCallback:t.payload.callback});case"OPEN_CONFIRM_MODAL":return Object(N.a)({},e,{openConfirmModal:!0,confirmModalText:t.payload.text,confirmModalCallbackSuccess:t.payload.callbackSuccess,confirmModalCallbackFail:t.payload.callbackFail});case"CLOSE_CONFIRM_MODAL":return Object(N.a)({},e,{openConfirmModal:!1});default:return e}},J={tasks:[]},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_TASKS":return Object(N.a)({},e,{tasks:t.payload});default:return e}},K={checkpoints:[],errors:[]},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_CHECKPOINTS":return Object(N.a)({},e,{checkpoints:t.payload,errors:[]});default:return e}},Z=function(e){return Object(v.c)({tasks:V,checkpoints:X,users:S,messages:x,lang:M,auth:R,places:B,clients:Y,loading:H,router:Object(L.b)(e),routing:y.routerReducer,admin:Q})},$=Object(k.a)(),ee=[_.a,Object(y.routerMiddleware)($)],te=[v.a.apply(void 0,ee)].concat(Object(f.a)(window.__REDUX_DEVTOOLS_EXTENSION__?[window.__REDUX_DEVTOOLS_EXTENSION__()]:[])),ae=Object(v.e)(Z($),{Intl:{locale:"en"}},v.d.apply(void 0,Object(f.a)(te))),ne=a(795),se=a(35),le=a.n(se),re=a(15),oe=a.n(re),ce=window.location.origin+"/",ie=ce;"localhost"==window.location.hostname&&(ie="http://localhost:4000/");var me=ie+"t/",de=ie+"api/",pe=ie+"files/images/",ue="places_ids",he={width:400,height:400,margin:15,image:null,qrOptions:{typeNumber:"0",mode:"Byte",errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,margin:0},dotsOptions:{type:"square",color:"#000000"},backgroundOptions:{color:"#ffffff"},dotsOptionsHelper:{colorType:{single:!0,gradient:!1},gradient:{linear:!0,radial:!1,color1:"#6a1a4c",color2:"#6a1a4c",rotation:"0"}},cornersSquareOptions:{type:"square",color:"#000000"},cornersSquareOptionsHelper:{colorType:{single:!0,gradient:!1},gradient:{linear:!0,radial:!1,color1:"#000000",color2:"#000000",rotation:"0"}},cornersDotOptions:{type:"",color:"#f66201"},cornersDotOptionsHelper:{colorType:{single:!0,gradient:!1},gradient:{linear:!0,radial:!1,color1:"#000000",color2:"#000000",rotation:"0"}},backgroundOptionsHelper:{colorType:{single:!0,gradient:!1},gradient:{linear:!0,radial:!1,color1:"#ffffff",color2:"#ffffff",rotation:"0"}}},ge=function(e){return function(t){t(function(e){e({type:"CLEAR_MESSAGES"})}),t({type:"ADD_ERROR_MESSAGES",payload:e})}},be=function(e){return function(t){t(function(e){e({type:"CLEAR_MESSAGES"})}),t({type:"ADD_SUCCESS_MESSAGE",payload:e})}},Ee=function(){return function(e){oe.a.get(de+"languages").then(function(t){return e({type:"LIST_LANGUAGES",payload:t.data})}).catch(function(e){throw console.log("erroring ",e),e})}},fe=a(104),ve=a(96),_e=a.n(ve);function ye(e){e?oe.a.defaults.headers.common.place=e:delete oe.a.defaults.headers.common.place}var ke=new fe.a,Ne=function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,null,[{key:"getDecodedUser",value:function(){var e=window.localStorage.getItem("_tut_");return e?_e.a.decode(e):{}}},{key:"isUserAuthenticated",value:function(){return null!==window.localStorage.getItem("_tut_")}},{key:"setToken",value:function(e){localStorage.setItem("_tut_",e)}},{key:"getToken",value:function(){return window.localStorage.getItem("_tut_")}},{key:"removeToken",value:function(){return window.localStorage.removeItem("_tut_")}},{key:"hasAccess",value:function(e){var t=this.getDecodedUser();if(!t)return!1;var a=t.role;switch(e){case"USER":return!0;case"PLACE_ADMIN":return"PLACE_ADMIN"==a||"CLIENT_ADMIN"==a||"SUPER_ADMIN"==a;case"CLIENT_ADMIN":return"CLIENT_ADMIN"==a||"SUPER_ADMIN"==a;case"SUPER_ADMIN":return"SUPER_ADMIN"==a;default:return!1}}},{key:"hasAccessCustom",value:function(e){var t=this.getDecodedUser();if(!t)return!1;var a=t.role;return!!e.includes(a)}},{key:"setUserPlace",value:function(e){var t=new Date,a=new Date;a.setFullYear(t.getFullYear()+100),e&&(ke.set("tabl_a_place",e,{path:"/",expires:a}),ye(e))}},{key:"getUserPlace",value:function(){return ke.get("tabl_a_place")}}]),e}(),Ce=a(45),Oe=a.n(Ce),je=function(){return function(e){var t=Oe()(Ne.getToken()),a="";"CLIENT_ADMIN"==t.role?a="?client_id=".concat(t.client_id):"PLACE_ADMIN"==t.role&&(a="?place_id=".concat(t.place_id)),oe.a.get(de+"places".concat(a)).then(function(t){e({type:"LIST_PLACES",payload:t&&t.data?t.data:[]})}).catch(function(e){throw e})}},Se=function(e){return function(t){return oe.a.post(de+"places",e).then(function(e){t(je())})}},Ie=function(e){return function(t){oe.a.post(de+"settings/init_place_settings",{place_id:e}).then(function(e){t(be(e.data.message))}).catch(function(e){t(ge(e.response.data.error.errors))})}},xe=function(){return function(e){oe.a.post(de+"settings/initSettingsAllPlaces",{}).then(function(t){e(be(t.data.data.message))}).catch(function(t){e(ge(t.response.data.error.errors))})}};function we(e){e?oe.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete oe.a.defaults.headers.common.Authorization}function Ae(){return Ne.removeToken(),we(!1),$.push("/admin/login"),{type:O}}function Te(e){return{type:C,user:e}}var Me=a(167),Le=(a(554),function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=[];if("Unauthorized"!=this.props.data){if(this.props.errors&&this.props.errors.response&&this.props.errors.response.data&&"string"===typeof this.props.errors.response.data){var a=this.props.errors.response.data;a=this.props.translations&&this.props.translations.messages.errors[a]||a,t.push(a)}else this.props.errors&&this.props.errors.response&&this.props.errors.response.data&&this.props.errors.response.data.error&&this.props.errors.response.data.error.errors?this.props.errors.response.data.error.errors.map(function(a){var n=a.message;n=e.props.translations&&e.props.translations.messages.errors[n]||n,t.push(n)}):this.props.errors.length>0&&"object"===typeof this.props.errors[0]&&null!==this.props.errors[0]?this.props.errors.map(function(e){t.push(e.message)}):this.props.errors.length>0&&"string"===typeof this.props.errors[0]&&(t=this.props.errors);return t.map(function(e){Me.b.error(e,{theme:"colored"})}),this.props.success.length>0&&Me.b.success(this.props.success,{theme:"colored"}),r.a.createElement(Me.a,{position:"top-right",autoClose:8e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})}this.props.logout()}}]),t}(l.Component)),Pe=Object(E.c)(function(e,t){return{data:e.messages.data,errors:e.messages.errors||[],success:e.messages.success||"",translations:e.lang}},{logout:Ae})(Le),Fe=(a(556),a(39)),De=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handlePageChange=function(e){},a.onChangeSelectAutocompletePlace=function(e){Ne.setUserPlace(e.value),window.localStorage.setItem(ue,JSON.stringify([e.value])),document.location.href=document.location.href},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listPlacesByUserRole()}},{key:"render",value:function(){var e=[],t={};return this.props.places.map(function(a){Ne.getUserPlace()==a.id&&(t={value:a.id,label:a.name}),e.push({value:a.id,label:a.name})}),r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.sidemenu.places)),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(Pe,null),r.a.createElement(Fe.a,{name:"parentId",options:e,onChange:this.onChangeSelectAutocompletePlace,value:t}),r.a.createElement("br",null),r.a.createElement("hr",null)))))))))}}]),t}(l.Component),Re=Object(E.c)(function(e,t){return{currUser:e.auth.user||[],places:e.places.places,translations:e.lang}},function(e,t){return Object(N.a)({dispatch:e},Object(v.b)({listPlacesByUserRole:je},e))})(De),Ue=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){Oe()(Ne.getToken());oe.a.get(de+"users").then(function(t){return e({type:"LIST_USERS",payload:t&&t.data||[]})}).catch(function(e){throw console.log("erroring ",e),e})}},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){var a="";null!=e&&(a+="?place_id="+e),oe.a.get(de+"users/registered"+a).then(function(e){return t({type:"LIST_REGISTERED_USERS",payload:e&&e.data||[]})}).catch(function(e){throw console.log("erroring ",e),e})}},We=function(){return function(e){oe.a.get(de+"users/roles").then(function(t){return e({type:"LIST_USER_ROLES",payload:t.data})}).catch(function(t){t&&t.response&&t.response.data&&t.response.data.error&&t.response.data.error.errors?e(ge(t.response.data.error.errors)):e(ge(["Unauthorized"]))})}},Ye=function(e,t,a){return function(e){oe.a.post(de+"users/edit",t).then(function(t){e(Ue()),a.push("/admin/users")}).catch(function(t){e(ge(t.response.data.error.errors))})}},qe=function(e){return r.a.createElement("div",{className:"modal fade",id:"dangerModal"+e.userId,tabIndex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-danger",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Delete user"),r.a.createElement("button",{className:"close",type:"button","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("p",null,"Are you sure you want to delete user '",e.userEmail,"'?")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("button",{className:"btn btn-secondary",type:"button","data-dismiss":"modal"},"Close"),r.a.createElement("button",{className:"btn btn-danger fright",type:"button","data-dismiss":"modal",onClick:function(t){e.deleteUser(t,e.userId,e.userEmail)}},"Delete")))))},He=function(e){if("demo@tabl.bg"!==e.user.email){var t="",a=e.roles&&e.roles.find(function(t){return t.id==e.user.roleId})||null;return a&&(t=a.name&&e.translations.roles[a.name]||"---"),r.a.createElement("tr",{key:e.user.id},r.a.createElement("td",null,e.user.email),r.a.createElement("td",null,t),r.a.createElement("td",null,e.user.active?r.a.createElement("span",{className:"badge badge-success"},e.translations.common.active):r.a.createElement("span",{className:"badge badge-secondary"},e.translations.common.inactive)),r.a.createElement("td",null,r.a.createElement(ne.a,{to:"/admin/users/edit/"+e.user.id},r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button"},r.a.createElement("i",{className:"fas fa-edit"}))),r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button","data-toggle":"modal","data-target":"#dangerModal"+e.user.id},r.a.createElement("i",{className:"fas fa-trash"})),r.a.createElement(qe,{userId:e.user.id,userEmail:e.user.email,deleteUser:e.deleteUser})))}return r.a.createElement(r.a.Fragment,null)},Ge=function(e){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group reservation-list-search col-md-2 col-sm-4 "},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},e.translations.users.email),r.a.createElement("input",{className:"form-control",id:"search_email",type:"text",placeholder:"",name:"search_email",onChange:e.onChange,value:e.search_email}))),r.a.createElement("div",{className:"form-group reservation-list-search col-md-2 col-sm-4 "},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.common.status),r.a.createElement("select",{className:"form-control",name:"search_active",defaultValue:e.search_active,onChange:e.onChange},r.a.createElement("option",{key:0,value:""},"-"),r.a.createElement("option",{value:1},e.translations.common.inactive),r.a.createElement("option",{value:2},e.translations.common.active)))))))},ze=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).deleteUser=function(e,t,n){e.preventDefault();var s={id:t,email:n,deleted:!0};a.props.editUser(t,s,a.props.history),a.props.listUsers()},a.onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value)),a.handlePageChange(1)},a.handlePageChange=function(e){a.props.dispatch(Object(y.push)("/admin/users?page="+e))},a.state={search_email:"",search_active:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listUsers(),this.props.listUserRoles()}},{key:"render",value:function(){var e=this,t=this.props.users;(this.state.search_email.length>0||0!=this.state.search_active)&&(t=Object.values(t).filter(function(t){return t.email.toLocaleLowerCase().includes(e.state.search_email.toLocaleLowerCase())&&(0==e.state.search_active||t.active==Boolean(parseInt(e.state.search_active)-1))}));var a=Object.keys(t).length,n=this.props.page,s=8*(n-1),l=0;return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.sidemenu.users),r.a.createElement("li",{className:"breadcrumb-menu d-md-down-none"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Button group"},r.a.createElement(ne.a,{to:"/admin/users/add",className:"btn"},r.a.createElement("i",{className:"fas fa-plus"})," \xa0 ",this.props.translations.users.add)))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement(Ge,{translations:this.props.translations,onChange:this.onChange,users:this.props.users}),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table table-responsive-sm table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,this.props.translations.users.email),r.a.createElement("th",null,this.props.translations.common.role),r.a.createElement("th",null,this.props.translations.common.status),r.a.createElement("th",null,this.props.translations.common.action))),r.a.createElement("tbody",null,Object.values(t).map(function(t,a){if(a>=s&&l<8)return l++,r.a.createElement(He,{key:t.id,user:t,deleteUser:e.deleteUser,translations:e.props.translations,roles:e.props.roles})}))),r.a.createElement(le.a,{className:"pagination",itemClass:"page-item",activePage:n,activeClass:"active",linkClass:"page-link",prevPageText:"<",nextPageText:">",firstPageText:"<<",lastPageText:">>",itemsCountPerPage:8,totalItemsCount:a,pageRangeDisplayed:5,onChange:this.handlePageChange}))))))))}}]),t}(l.Component),Qe=Object(E.c)(function(e,t){return{users:e.users.users||[],page:Number(e.router.location.query.page)||1,translations:e.lang,roles:e.users.roles}},function(e,t){return Object(N.a)({dispatch:e},Object(v.b)({listUsers:Ue,editUser:Ye,listUserRoles:We},e))})(ze),Je=a(369),Ve=a(793),Ke=a(776),Xe=a(779),Ze=a(778),$e=a(360),et=a.n($e),tt=a(770),at=a(26),nt=a.n(at),st=a(312),lt=function(){function e(){Object(i.a)(this,e)}return Object(m.a)(e,null,[{key:"generateCheckpointToken",value:function(e){return st(st(e+ +new Date))}},{key:"cropMail",value:function(e){return e&&-1!==e.indexOf("@")?e.split("@")[0]:e}},{key:"objectToFormData",value:function(e){var t=new FormData;for(var a in e)t.append(a,e[a]);return t}},{key:"onChange",value:function(e){return Object(w.a)({},e.target.name,e.target.type&&"number"===e.target.type?parseFloat(e.target.value):e.target.value)}},{key:"onChangeCheckbox",value:function(e){return Object(w.a)({},e.target.name,e.target.checked?1:0)}},{key:"truncate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return 0==e.length?"-":e.length>t?e.substring(0,a)+"...":e}},{key:"errorHandler",value:function(e){var t=0;return e.response?(t=1,console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?(t=2,t+=" - \u041f\u0440\u043e\u0431\u043b\u0435\u043c \u0441\u044a\u0441 \u0441\u044a\u0440\u0432\u044a\u0440\u0430 \u0438\u043b\u0438 \u0441\u043b\u0430\u0431 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442!",console.log(e.request)):(t=3,console.log("Error",e.message)),"\u0412\u044a\u0437\u043d\u0438\u043a\u043d\u0430 \u0433\u0440\u0435\u0448\u043a\u0430 #"+t}},{key:"translate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return 0===Object.keys(t).length?e:(Object.entries(t).map(function(t){return e=e.replace("{"+t[0]+"}",t[1])}),e)}},{key:"getCurrClientPlacesCount",value:function(e){var t=Ne.getUserPlace(),a=0;if(e){var n=e.find(function(e){return e.id==t});if(n){var s=n.clientId;a=e.filter(function(e){return e.clientId==s}).length}}return a}},{key:"getOptionsForAutocompleteSelect",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[],n=[];return e&&Object.values(e).map(function(s){var l=s.children.filter(function(e){return 0==e.deleted}).length;if(1==s.active&&0==s.deleted&&(0==s.children.length||0==l))if(t){for(var r="",o=0;o<s.hierarchyLevel-1;o++)r+="-";a.push({value:s.id,label:r+s.name+(s.code?" ("+s.code+")":"")+(e&&e[s.parentId]&&e[s.parentId].name?" /"+e[s.parentId].name+"/":"")})}else n.push(s)}),t?a:n}}]),e}();lt.appendLeadingZeroes=function(e){return e<=9?"0"+e:e},lt.appendTokenToFormData=function(e){return e.append("Authorization","Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJ0YWJsIiwiYXVkIjoiVEhFX0FVRElFTkNFIiwiaWF0IjoxNTcxMDkzNzMyLCJuYmYiOjE1NzEwOTM3NDIsImV4cCI6MTcyODc3MzczMiwiZGF0YSI6eyJpZCI6IjEiLCJmaXJzdG5hbWUiOiJ0ZXN0IiwibGFzdG5hbWUiOm51bGwsImVtYWlsIjoidGVzdEB0ZXN0LmNvbSJ9fQ.wdL6RIeLM3FmojeDZuz6BBsGg1BBSHn4vX3-nYyNdHk")},lt.buildURLQuery=function(e){return Object.entries(e).map(function(e){return e.map(encodeURIComponent).join("=")}).join("&")},lt.changeListDateFormat=function(e){var t=[];return t[0]="\u044f\u043d\u0443",t[1]="\u0444\u0435\u0432",t[2]="\u043c\u0430\u0440\u0442",t[3]="\u0430\u043f\u0440",t[4]="\u043c\u0430\u0439",t[5]="\u044e\u043d\u0438",t[6]="\u044e\u043b\u0438",t[7]="\u0430\u0432\u0433",t[8]="\u0441\u0435\u043f",t[9]="\u043e\u043a\u0442",t[10]="\u043d\u043e\u0435",t[11]="\u0434\u0435\u043a",lt.appendLeadingZeroes(e.getDate())+"-"+t[e.getMonth()]+"-"+e.getFullYear()+" "+lt.appendLeadingZeroes(e.getHours())+":"+lt.appendLeadingZeroes(e.getMinutes())},lt.navigateTo=function(e){$.push(e)},lt.goBack=function(){$.goBack()},lt.normalizePrice=function(e){return e.toFixed(2)},lt.compareForPriority=function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(e,t){var a=e.priority,n=t.priority;return a<n?-1:a>n?1:0}},lt.sortName=function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";return function(t,a){var n=t[e].toUpperCase(),s=a[e].toUpperCase();return n<s?-1:n>s?1:0}};var rt=lt,ot=Object(tt.a)(function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"50%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}}),ct=function(e){var t=ot(),a=r.a.useState(!1),n=Object(Je.a)(a,2);n[0],n[1];return r.a.createElement("div",{className:"modal fade",id:"ordersModal"+e.userId,tabIndex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-success",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Orders"),r.a.createElement("button",{className:"close",type:"button","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},e.orders.map(function(a){var n=Object.values(a.order_productvariants).map(function(t,n){var s=a.order_comment?JSON.parse(a.order_comment).find(function(e){return e.variantId===t.productVariantId}):void 0,l=[],o=[],c=[];return r.a.createElement("p",{key:n},t.quantity," x ",r.a.createElement("b",null,e.all_products&&e.all_products[t.product_variant.productId]&&e.all_products[t.product_variant.productId].name?e.all_products[t.product_variant.productId].name:"")," - ",r.a.createElement("i",null,t.product_variant.size)," /",t.product_variant.price," ",e.settings.default_currency_suffix&&e.settings.default_currency_suffix.value?e.settings.default_currency_suffix.value:"\u043b\u0432.","/ -\xa0",r.a.createElement("span",{style:{"text-decoration":"none",background:"#e8e8e8","border-radius":4,padding:"1px 5px"}},"(",e.categoriesHierarchy&&e.categoriesHierarchy[t.catHierarchyId]?e.categoriesHierarchy[t.catHierarchyId].name:"",")"),(2==a.ordertypeId||3==a.ordertypeId)&&e.settings&&e.settings.show_variant_additional_price&&e.settings.show_variant_additional_price.value&&1==e.settings.show_variant_additional_price.value&&"0.00"!=parseFloat(t.product_variant.additional_price).toFixed(2)?" + "+(e.translations&&e.translations.common&&e.translations.common.box?e.translations.common.box:"")+" "+t.product_variant.additional_price+" "+(e.settings.default_currency_suffix&&e.settings.default_currency_suffix.value?e.settings.default_currency_suffix.value:"\u043b\u0432."):"",s&&s.comment?r.a.createElement(r.a.Fragment,null," - ",r.a.createElement("span",{className:"badge badge-secondary"},s.comment)):null,t.opv_ingredients.map(function(e){"required"==e.ingredient_type&&l.push(e.ingredientId),"addable"==e.ingredient_type&&o.push(e.ingredientId),"removable"==e.ingredient_type&&c.push(e.ingredientId)}),l.length>0?r.a.createElement("div",{style:{fontStyle:"italic"}},rt.getIngredientNamesByIds(e.ingredients,l)):null,o.length>0?r.a.createElement("div",{style:{color:"#008017",fontStyle:"italic"}},"+ ",rt.getIngredientNamesByIds(e.ingredients,o)):null,c.length>0?r.a.createElement("div",{style:{color:"#c50000",fontStyle:"italic"}},"- ",rt.getIngredientNamesByIds(e.ingredients,c)):null)});return r.a.createElement(Ve.a,null,r.a.createElement(Ke.a,{expandIcon:r.a.createElement(et.a,null)},r.a.createElement(Ze.a,{className:t.heading},nt()(a.createdAt).format("DD-MM-YYYY HH:mm"))),r.a.createElement(Xe.a,null,r.a.createElement(Ze.a,null,e.translations.common.order_type," - ",r.a.createElement("b",null,a.ordertype.type),r.a.createElement("br",null),e.translations.common.total_amount," - ",r.a.createElement("b",null,a.total_price?a.total_price:null),"\xa0",e.translations.common.currency,a.discount_price&&0!=a.discount_price?r.a.createElement("div",null,"\u041e\u0442\u0441\u0442\u044a\u043f\u043a\u0430: ",a.discount_price," ",e.translations.common.currency," ","percent"==a.discount_type&&a.discount_value?r.a.createElement("span",null,"(",a.discount_value," %)"):null):null,a.delivery_price&&0!=a.delivery_price?r.a.createElement("div",null,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430: ",a.delivery_price," ",e.translations.common.currency):null,r.a.createElement("br",null),n)))})))))},it=function(e){return"demo@tabl.bg"!==e.user.email?r.a.createElement("tr",{key:e.user.id},r.a.createElement("td",null,nt()(e.user.createdAt).format("DD-MM-YYYY HH:mm")),r.a.createElement("td",null,e.user.email),r.a.createElement("td",null,e.user.fullname),r.a.createElement("td",null,r.a.createElement("a",{href:"tel:"+e.user.phone},e.user.phone)),r.a.createElement("td",null,e.user.address||"-"),r.a.createElement("td",null,e.user.active?r.a.createElement("span",{className:"badge badge-success"},e.translations.common.active):r.a.createElement("span",{className:"badge badge-secondary"},e.translations.common.inactive)),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button","data-toggle":"modal","data-target":"#ordersModal"+e.user.id},e.translations.common.orders," (",e.user.orders.length,")"),r.a.createElement(ct,{userId:e.user.id,userEmail:e.user.email,orders:e.user.orders,settings:e.settings,all_products:e.all_products,translations:e.translations,categoriesHierarchy:e.categoriesHierarchy}))):r.a.createElement(r.a.Fragment,null)},mt=(a(586),function(e){var t=[],a=e.places&&e.places.find(function(e){return e.id==Ne.getUserPlace()})||null;return a&&a.clientId,Ne.hasAccess("SUPER_ADMIN")&&t.push({value:"all",label:"All"}),Object.values(e.places).map(function(e){1==e.active&&t.push({value:e.id,label:e.name})}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},e.translations.users.email),r.a.createElement("input",{className:"form-control",id:"search_email",type:"text",placeholder:"",name:"search_email",onChange:e.onChange,value:e.search_email}))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.common.status),r.a.createElement("select",{className:"form-control",name:"search_active",defaultValue:e.search_active,onChange:e.onChange},r.a.createElement("option",{key:0,value:""},"-"),r.a.createElement("option",{value:1},e.translations.common.inactive),r.a.createElement("option",{value:2},e.translations.common.active)))),Ne.hasAccess("SUPER_ADMIN")?r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",{htmlFor:"place"},e.translations.common.place),r.a.createElement(Fe.a,{name:"place",options:t,placeholder:"",onChange:function(t){return e.onChangeSelectAutocomplete("filter_place",t)}})):null,r.a.createElement("hr",null))}),dt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value)),a.handlePageChange(1)},a.handlePageChange=function(e){a.props.dispatch(Object(y.push)("/admin/users/registered?page="+e))},a.onChangeSelectAutocomplete=function(e,t){a.setState(Object(w.a)({},e,t.value));var n=t.value;a.props.getRegisteredUsers(n)},a.state={search_email:"",search_active:"",filter_place:null},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.getRegisteredUsers()}},{key:"componentsWillReceiveProps",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props.registered_users;(this.state.search_email.length>0||0!=this.state.search_active)&&(t=Object.values(t).filter(function(t){return t.email.toLocaleLowerCase().includes(e.state.search_email.toLocaleLowerCase())&&(0==e.state.search_active||t.active==Boolean(parseInt(e.state.search_active)-1))}));var a=Object.keys(t).length,n=this.props.page,s=8*(n-1),l=0;return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.users.registered_users)),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement(mt,{translations:this.props.translations,onChange:this.onChange,onChangeSelectAutocomplete:this.onChangeSelectAutocomplete,users:this.props.users,places:this.props.places}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("b",null,"Total:")," ",Object.keys(t).length,r.a.createElement("table",{className:"table table-responsive-sm table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,this.props.translations.users.date_of_registration),r.a.createElement("th",null,this.props.translations.users.email),r.a.createElement("th",null,this.props.translations.users.fullname),r.a.createElement("th",null,this.props.translations.users.phone),r.a.createElement("th",null,this.props.translations.users.address),r.a.createElement("th",null,this.props.translations.common.status),r.a.createElement("th",null,this.props.translations.common.orders))),r.a.createElement("tbody",null,Object.values(t).map(function(t,a){if(a>=s&&l<8)return l++,r.a.createElement(it,{key:t.id,user:t,translations:e.props.translations,settings:e.props.settings,all_products:e.props.products,categoriesHierarchy:e.props.categoriesHierarchy})}))),r.a.createElement(le.a,{className:"pagination",itemClass:"page-item",activePage:n,activeClass:"active",linkClass:"page-link",prevPageText:"<",nextPageText:">",firstPageText:"<<",lastPageText:">>",itemsCountPerPage:8,totalItemsCount:a,pageRangeDisplayed:5,onChange:this.handlePageChange}))))))))}}]),t}(l.Component),pt=Object(E.c)(function(e,t){return{registered_users:e.users.registered_users||[],page:Number(e.router.location.query.page)||1,translations:e.lang,roles:e.users.roles,products:e.products.products||[],categoriesHierarchy:e.categoriesHierarchy.categories||[],places:e.places.places||[]}},function(e,t){return Object(N.a)({dispatch:e},Object(v.b)({getRegisteredUsers:Be},e))})(dt),ut=a(33),ht=function(e){var t,a,n=[];e.roles.map(function(a){e.roleId==a.id&&(t=a.id),n.push(r.a.createElement("option",{key:a.id,value:a.id},e.translations.roles[a.name]||"---"))});var s=e.places.map(function(t){return e.userPlaceId==t.id&&(a=t.id),r.a.createElement("option",{key:t.id,value:t.id},t.name)});return r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement(Pe,null),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.users.email),r.a.createElement("input",{className:"form-control",id:"name",type:"text",placeholder:"",name:"email",onChange:e.onChange,value:e.userEmail})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.users.password),r.a.createElement("input",{className:"form-control",id:"name",type:"text",placeholder:"",name:"password",onChange:e.onChange})))),r.a.createElement("div",{className:"row"},r.a.createElement("label",{className:"col-md-1 col-form-label"},e.translations.common.active),r.a.createElement("div",{className:"col-md-11 col-form-label"},r.a.createElement("label",{className:"switch switch-label switch-pill switch-outline-primary-alt"},r.a.createElement("input",{className:"switch-input",type:"checkbox",name:"active",onChange:e.onChangeCheckbox,checked:e.userActive}),r.a.createElement("span",{className:"switch-slider","data-checked":e.translations.common.yes,"data-unchecked":e.translations.common.no})))),r.a.createElement("div",{className:"row"},r.a.createElement("label",{className:"col-md-1 col-form-label"},e.translations.common.role),r.a.createElement("div",{className:"col-md-11 col-form-label"},r.a.createElement("select",{className:"form-control",name:"role",onChange:e.onChange,value:t},r.a.createElement("option",{key:0,value:0},"-"),n))),r.a.createElement("div",{className:"row"},r.a.createElement("label",{className:"col-md-1 col-form-label"},e.translations.common.place),r.a.createElement("div",{className:"col-md-11 col-form-label"},r.a.createElement("select",{className:"form-control",name:"placeId",onChange:e.onChange,value:a},r.a.createElement("option",{key:0,value:0},"-"),s))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("div",{className:"form-actions"},"1"==e.isAddingUser?"":r.a.createElement("button",{className:"btn btn-danger mright10",type:"button","data-toggle":"modal","data-target":"#dangerModal"+e.userId},e.translations.common.delete),r.a.createElement(qe,{userId:e.userId,userEmail:e.userEmail,deleteUser:e.deleteUser}),r.a.createElement(ne.a,{to:"/admin/users"},r.a.createElement("button",{className:"btn btn-secondary",type:"button"},e.translations.common.cancel)),r.a.createElement("button",{className:"fright btn btn-primary",type:"submit"},"1"==e.isAddingUser?e.translations.common.add:e.translations.common.edit))))},gt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={email:"",active:1,role:0,placeId:0},a.onChange=a.onChange.bind(Object(ut.a)(Object(ut.a)(a))),a.onChangeCheckbox=a.onChangeCheckbox.bind(Object(ut.a)(Object(ut.a)(a))),a.onSubmit=a.onSubmit.bind(Object(ut.a)(Object(ut.a)(a))),a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.listUserRoles(),this.props.listPlacesByUserRole()}},{key:"componentWillReceiveProps",value:function(e){this.setState({email:"",active:1})}},{key:"onChange",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"onChangeCheckbox",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.checked))}},{key:"validate",value:function(e){var t=[];return 0==e.role&&t.push(this.props.translations.messages.errors.invalid_role),0==e.placeId&&t.push(this.props.translations.messages.errors.invalid_place),t}},{key:"onSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,password:this.state.password,active:this.state.active,role:this.state.role,placeId:this.state.placeId},a=this.validate(t);a.length>0?this.props.addErrorMessages(a):this.props.addUser(t,this.props.history)}},{key:"render",value:function(){return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/users"},this.props.translations.sidemenu.users)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.users.add)),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(ht,{onSubmit:this.onSubmit,onChange:this.onChange,onChangeCheckbox:this.onChangeCheckbox,userEmail:this.state.email,userActive:this.state.active,isAddingUser:1,translations:this.props.translations,roles:this.props.roles,places:this.props.places})))))))}}]),t}(l.Component),bt=Object(E.c)(function(e){return{errors:e.users.errors,translations:e.lang,roles:e.users.roles,places:e.places.places||[]}},{addUser:function(e,t){return function(a){oe.a.post(de+"users/register",e).then(function(e){a(Ue()),t.push("/admin/users")}).catch(function(e){e&&e.response?a(ge(e.response.data.error.errors)):console.log("ERROR ",e)})}},listUserRoles:We,addErrorMessages:ge,listPlacesByUserRole:je})(gt),Et=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).deleteUser=function(e,t,n){e.preventDefault();var s={id:t,email:n,deleted:!0};a.props.editUser(t,s,a.props.history)},a.state={id:a.props.match.params.id,email:a.props.user.email,active:a.props.user.active?a.props.user.active:0,role:a.props.user.roleId?a.props.user.roleId:0,placeId:a.props.user.placeId?a.props.user.placeId:0},a.onChange=a.onChange.bind(Object(ut.a)(Object(ut.a)(a))),a.onChangeCheckbox=a.onChangeCheckbox.bind(Object(ut.a)(Object(ut.a)(a))),a.onSubmit=a.onSubmit.bind(Object(ut.a)(Object(ut.a)(a))),a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.listUsers(),this.props.listUserRoles()}},{key:"componentWillReceiveProps",value:function(e){e.user.id&&this.setState({id:e.match.params.id,email:e.user.email,active:e.user.active?e.user.active:0,role:e.user.roleId?e.user.roleId:0,placeId:e.user.placeId?e.user.placeId:0})}},{key:"onChange",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.value))}},{key:"onChangeCheckbox",value:function(e){this.setState(Object(w.a)({},e.target.name,e.target.checked))}},{key:"validate",value:function(e){var t=[];return 0==e.role&&t.push(this.props.translations.messages.errors.invalid_role),t}},{key:"onSubmit",value:function(e){e.preventDefault();var t={id:this.state.id,email:this.state.email,password:this.state.password,active:this.state.active,role:this.state.role,placeId:this.state.placeId},a=this.validate(t);a.length>0?this.props.addErrorMessages(a):this.props.editUser(this.state.id,t,this.props.history)}},{key:"render",value:function(){return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/users"},this.props.translations.sidemenu.users)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.users.edit)),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(ht,{onSubmit:this.onSubmit,onChange:this.onChange,onChangeCheckbox:this.onChangeCheckbox,userId:this.state.id,userEmail:this.state.email,userActive:this.state.active,deleteUser:this.deleteUser,actionText:"\u0417\u0430\u043f\u0430\u0437\u0438",isAddingUser:"0",nameError:this.props.errors.find(function(e){return"name"==e.path})?this.props.errors.find(function(e){return"name"==e.path}):"",translations:this.props.translations,roles:this.props.roles,roleId:this.state.role,places:this.props.places,userPlaceId:this.state.placeId})))))))}}]),t}(l.Component),ft=Object(E.c)(function(e,t){var a=t.match.params.id,n=e.users.users[a];return n||(n={id:"",email:"",active:"",role:0,placeId:0}),{user:n,errors:e.users.errors,translations:e.lang,roles:e.users.roles||[],places:e.places.places||[]}},{listUsers:Ue,editUser:Ye,listUserRoles:We,addErrorMessages:ge})(Et),vt=function(e){function t(e){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"col-md-6 col-md-offset-3 m0auto mtop50"},r.a.createElement("h2",null,this.props.translations.login.title),r.a.createElement("form",{name:"form",onSubmit:this.props.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},this.props.translations.login.email),r.a.createElement("input",{type:"text",className:"form-control",name:"email",value:this.props.email,onChange:this.props.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},this.props.translations.login.password),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:this.props.password,onChange:this.props.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},this.props.translations.login.login))))}}]),t}(l.Component),_t=Object(E.c)(null,{})(vt),yt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={email:"",password:""},a.handleChange=a.handleChange.bind(Object(ut.a)(Object(ut.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(ut.a)(Object(ut.a)(a))),a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"isLoggedIn",value:function(){_e.a.decode(Ne.getToken())&&void 0!=_e.a.decode(Ne.getToken())&&$.push("/my-tasks")}},{key:"componentWillMount",value:function(){this.isLoggedIn()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(w.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.state.email&&this.state.password?this.props.login(this.state).then(function(e){var a=e.data.token;if(a){Ne.setToken(a),we(a);var n=Oe()(a);t.props.setCurrentUser(n),Ne.setUserPlace(n.place_id),window.localStorage.setItem(ue,JSON.stringify([n.place_id])),window.location.href="/my-tasks"}else t.props.addErrorMessages([t.props.translations.messages.errors.invalid_credentials])}).catch(function(e){t.props.addErrorMessages([t.props.translations.messages.errors.invalid_credentials])}):this.props.addErrorMessages([this.props.translations.messages.errors.invalid_credentials])}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe,null),r.a.createElement(_t,{onChange:this.handleChange,onSubmit:this.handleSubmit,email:this.state.email,password:this.state.password,translations:this.props.translations}))}}]),t}(l.Component),kt=Object(E.c)(function(e){return{translations:e.lang}},{login:function(e){return function(t){return oe.a.post(de+"users/login",e)}},setCurrentUser:Te,addErrorMessages:ge})(yt),Nt=a(370),Ct=a(792),Ot=function(e){var t=e.component,a=Object(Nt.a)(e,["component"]);return r.a.createElement(b.a,Object.assign({},a,{render:function(e){return Ne.getToken()?r.a.createElement(t,e):r.a.createElement(Ct.a,{to:{pathname:"/admin/login",state:{from:e.location}}})}}))},jt=function(e){return r.a.createElement("div",{className:"modal fade",id:"dangerModal"+e.id,tabIndex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-danger",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},e.translations.places.delete.title),r.a.createElement("button",{className:"close",type:"button","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("p",null,e.translations.places.delete.confirm," '",e.name,"'?")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("button",{className:"btn btn-secondary",type:"button","data-dismiss":"modal",style:{float:"left"}},e.translations.common.close),r.a.createElement("button",{className:"btn btn-danger fright",type:"button","data-dismiss":"modal",onClick:function(t){e.deletePlace(t,e.id)}},e.translations.common.delete)))))},St=function(e){return r.a.createElement("tr",{key:e.place.id},r.a.createElement("td",null,e.place.name),r.a.createElement("td",null,r.a.createElement(ne.a,{to:"/admin/places/edit/"+e.place.id},r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button"},r.a.createElement("i",{className:"fas fa-edit"}))),r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button","data-toggle":"modal","data-target":"#dangerModal"+e.place.id},r.a.createElement("i",{className:"fas fa-trash"})),r.a.createElement(jt,{id:e.place.id,name:e.place.name,deletePlace:e.deletePlace,translations:e.translations})))},It=function(e){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group reservation-list-search col-md-2 col-sm-4 "},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.common.name),r.a.createElement("input",{className:"form-control",id:"search_name",type:"text",placeholder:"",name:"search_name",onChange:e.onChange,value:e.search_name}))))))},xt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).deletePlace=function(e,t){e.preventDefault(),a.props.addEditPlace({id:t,deleted:!0})},a.handlePageChange=function(e){a.props.dispatch(Object(y.push)("/admin/places?page="+e))},a.onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value)),a.handlePageChange(1)},a.onChangeCheckbox=function(e,t){e.preventDefault(),a.props.addEditPlace({id:t,is_paying:e.target.checked}),a.props.listPlacesByUserRole()},a.activeDefaultLanguage="bg",a.state={search_name:"",search_active:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listPlacesByUserRole()}},{key:"render",value:function(){var e=this,t=this.props.items;this.state.search_name.length>0?t=Object.values(t).filter(function(t){return t.name.toLocaleLowerCase().includes(e.state.search_name.toLocaleLowerCase())}):1==this.state.search_is_paying?t=Object.values(t).filter(function(e){return 1==e.is_paying}):2==this.state.search_is_paying?t=Object.values(t).filter(function(e){return 0==e.is_paying}):this.state.search_name.length>0&&1==this.state.search_is_paying&&(t=Object.values(t).filter(function(t){return 1==t.is_paying&&t.name.toLocaleLowerCase().includes(e.state.search_name.toLocaleLowerCase())}));var a=t.length,n=this.props.page,s=8*(n-1),l=0;return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.places.title),r.a.createElement("li",{className:"breadcrumb-menu d-md-down-none"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Button group"},r.a.createElement(ne.a,{to:"/admin/places/add",className:"btn"},r.a.createElement("i",{className:"fas fa-plus"})," \xa0 ",this.props.translations.places.add)))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement(It,{translations:this.props.translations,onChange:this.onChange}),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(Pe,null),r.a.createElement("table",{className:"table table-responsive-sm table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,this.props.translations.common.name),r.a.createElement("th",null,this.props.translations.common.action))),r.a.createElement("tbody",null,t.map(function(t,a){if(a>=s&&l<8)return l++,r.a.createElement(St,{key:t.id,place:t,deletePlace:e.deletePlace,translations:e.props.translations,currLang:e.props.currLang,initPlaceSettings:e.props.initPlaceSettings,onChangeCheckbox:function(a){return e.onChangeCheckbox(a,t.id)}})}))),r.a.createElement(le.a,{className:"pagination",itemClass:"page-item",activePage:n,activeClass:"active",linkClass:"page-link",prevPageText:"<",nextPageText:">",firstPageText:"<<",lastPageText:">>",itemsCountPerPage:8,totalItemsCount:a,pageRangeDisplayed:5,onChange:this.handlePageChange}))))))))}}]),t}(l.Component),wt=Object(E.c)(function(e,t){return{items:e.places.places||[],page:Number(e.router.location.query.page)||1,translations:e.lang,currLang:"bg"}},function(e,t){return Object(N.a)({dispatch:e},Object(v.b)({listPlacesByUserRole:je,addEditPlace:Se,initPlaceSettings:Ie,initSettingsForAllPlaces:xe},e))})(xt),At=function(){return function(e){Oe()(Ne.getToken());oe.a.get(de+"clientsAdmin").then(function(t){e({type:"LIST_CLIENTS",payload:t.data})}).catch(function(e){throw e})}},Tt=function(e,t,a){return function(a){oe.a.post(de+"clients",e).then(function(e){e=e.data,a(At()),t.push("/admin/clients"),a(be("Changes saved"))}).catch(function(e){})}},Mt=Object(E.c)(function(e){return{translationsType:1}},{})(function(e){var t=Object.values(e.languages).map(function(e){return r.a.createElement("option",{value:e.code},e.code)});return 2==e.translationsType?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control",id:"currLang",type:"text",name:"currLang",disabled:e.isDisabled,onChange:e.currLangOnChange,value:e.currLang},t)))):""}),Lt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).addUploadedFileText=function(e){e&&e.target&&e.target.files&&e.target.files[0]&&e.target.files[0].name&&a.setState({uploadedImgName:e.target.files[0].name})},a.state={uploadedImgName:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t,a=this.props,n=[];n.push({value:null,label:"Choose client"}),console.log("AUTO ",a.place),a.clients.map(function(t){a.place.clientId==t.id&&(e={value:t.id,label:t.name}),n.push({value:t.id,label:t.name})});var s=[];s.push({value:null,label:"Choose city"}),a.cities.map(function(e){a.place.cityId==e.id&&(t={value:e.id,label:e.name}),s.push({value:e.id,label:e.name})});var l=[];return a.tags.map(function(e){l.push({value:e.id,label:e.name})}),"0"==a.isAdding&&a.place.image&&a.place.image.length>0&&r.a.createElement("img",{src:rt.getPlaceImagePath(a.place.image),className:"editPagesImage"}),r.a.createElement("form",{onSubmit:a.onSubmit},r.a.createElement(Pe,null),r.a.createElement("div",{className:"card-body"},r.a.createElement(Mt,{isDisabled:1==a.isAdding?1:"",currLangOnChange:a.currLangOnChange,currLang:a.currLang,languages:a.languages}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement("label",{htmlFor:"parentId"},a.translations.common.client),r.a.createElement(Fe.a,{name:"parentId",options:n,onChange:a.onChangeSelectAutocompleteItems,value:e,placeholder:"Client"})),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},a.translations.common.name),r.a.createElement("input",{className:"form-control",id:"name",type:"text",placeholder:a.translations.common.name,name:"name",onChange:a.onChange,value:a.place.name}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"short_name"},a.translations.places.short_name),r.a.createElement("input",{className:"form-control",id:"short_name",type:"text",placeholder:a.translations.common.short_name,name:"short_name",onChange:a.onChange,value:a.place.short_name}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_name"},a.translations.places.company_name||""),r.a.createElement("input",{className:"form-control",type:"text",placeholder:a.translations.places.company_name,name:"company_name",onChange:a.onChange,value:a.place.company_name}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_name"},a.translations.places.company_eik||""),r.a.createElement("input",{className:"form-control",type:"text",placeholder:a.translations.places.company_eik,name:"company_eik",onChange:a.onChange,value:a.place.company_eik}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_city"},a.translations.places.company_city||""),r.a.createElement("input",{className:"form-control",type:"text",name:"company_city",onChange:a.onChange,value:a.place.company_city}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_address"},a.translations.places.company_address||""),r.a.createElement("input",{className:"form-control",type:"text",name:"company_address",onChange:a.onChange,value:a.place.company_address}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_person"},a.translations.places.company_person),r.a.createElement("input",{className:"form-control",type:"text",name:"company_person",onChange:a.onChange,value:a.place.company_person}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_email"},a.translations.places.company_email),r.a.createElement("input",{className:"form-control",type:"text",name:"company_email",onChange:a.onChange,value:a.place.company_email}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"monthly_fee"},a.translations.places.price),r.a.createElement("input",{className:"form-control",type:"text",name:"monthly_fee",onChange:a.onChange,value:a.place.monthly_fee}))),r.a.createElement("div",{className:"col-lg-3 col-md-3 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_vat_registered"},a.translations.places.company_vat_registered),r.a.createElement("label",{className:"switch switch-label switch-pill switch-outline-primary-alt"},r.a.createElement("input",{className:"switch-input",type:"checkbox",name:"company_vat_registered",onChange:a.onChangeCheckbox,checked:a.place.company_vat_registered}),r.a.createElement("span",{className:"switch-slider","data-checked":a.translations.common.yes,"data-unchecked":a.translations.common.no})))),r.a.createElement("div",{className:"col-lg-3 col-md-3 col-sm-12"},r.a.createElement("label",null,a.translations.common.is_paying),r.a.createElement("label",{className:"switch switch-label switch-pill switch-outline-primary-alt"},r.a.createElement("input",{className:"switch-input",type:"checkbox",name:"is_paying",onChange:a.onChangeCheckbox,checked:a.place.is_paying}),r.a.createElement("span",{className:"switch-slider","data-checked":a.translations.common.yes,"data-unchecked":a.translations.common.no}))),r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"additional_info"},a.translations.places.additional_info),r.a.createElement("textarea",{className:"form-control",name:"additional_info",onChange:a.onChange,value:a.place.additional_info}))),r.a.createElement("div",{className:"col-md-6 col-sm-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"lat"},a.translations.places.lat),r.a.createElement("input",{className:"form-control",type:"text",name:"lat",onChange:a.onChange,value:a.place.lat}))),r.a.createElement("div",{className:"col-md-6 col-sm-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"lng"},a.translations.places.lng),r.a.createElement("input",{className:"form-control",type:"text",name:"lng",onChange:a.onChange,value:a.place.lng}))),r.a.createElement("div",{className:"form-group col-sm-6"},r.a.createElement("label",{htmlFor:"parentId"},a.translations.places.city),r.a.createElement(Fe.a,{name:"cityId",options:s,onChange:function(e){return a.onChangeSelectAutocomplete("cityId",e)},value:t,placeholder:"City"})),r.a.createElement("div",{className:"col-lg-6 col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"visible_on_map"},a.translations.places.visible_on_map),r.a.createElement("label",{className:"switch switch-label switch-pill switch-outline-primary-alt"},r.a.createElement("input",{className:"switch-input",type:"checkbox",name:"visible_on_map",onChange:a.onChangeCheckbox,checked:a.place.visible_on_map}),r.a.createElement("span",{className:"switch-slider","data-checked":a.translations.common.yes,"data-unchecked":a.translations.common.no})))),r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement("label",{htmlFor:"catHierarchyId"},a.translations.places.tags),r.a.createElement(Fe.a,{value:a.place.tags,isMulti:!0,name:"colors",options:l,className:"basic-multi-select",classNamePrefix:"select",onChange:function(e){return a.onChangeSelectAutocompleteMulti("tags",e)}}))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("div",{className:"form-actions"},"1"==a.isAdding?"":r.a.createElement("button",{className:"btn btn-danger mright10",type:"button","data-toggle":"modal","data-target":"#dangerModal"+a.place.id},a.translations.common.delete),r.a.createElement(jt,{id:a.place.id,name:a.place.name,deletePlace:a.deletePlace,translations:a.translations}),r.a.createElement(ne.a,{to:"/admin/places"},r.a.createElement("button",{className:"btn btn-secondary",type:"button"},a.translations.common.cancel)),r.a.createElement("button",{className:"fright btn btn-primary",type:"submit"},"1"==a.isAdding?a.translations.common.add:a.translations.common.save))))}}]),t}(l.Component),Pt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.onChangeCheckbox=function(e){a.setState(Object(w.a)({},e.target.name,e.target.checked))},a.onChangeSelectAutocompleteItems=function(e){a.setState({clientId:e.value})},a.onChangeSelectAutocomplete=function(e,t){a.setState(Object(w.a)({},e,t.value))},a.onChangeSelectAutocompleteMulti=function(e,t){a.setState(Object(w.a)({},e,t))},a.onSubmit=function(e){e.preventDefault();var t=a.validate();if(t.length>0)a.props.addErrorMessages(t);else{var n=a.state.tags.map(function(e){return e.value}),s={name:a.state.name,short_name:a.state.short_name,company_name:a.state.company_name,company_eik:a.state.company_eik,company_vat_registered:a.state.company_vat_registered,company_city:a.state.company_city,company_address:a.state.company_address,company_person:a.state.company_person,company_email:a.state.company_email,monthly_fee:a.state.monthly_fee,additional_info:a.state.additional_info,lat:a.state.lat,lng:a.state.lng,visible_on_map:a.state.visible_on_map,is_paying:a.state.is_paying,cityId:a.state.cityId,tagsIds:n,clientId:a.state.clientId},l=Array.from(document.querySelector("#placeImg").files);console.log("FILES ",l);var r=new FormData;l.forEach(function(e,t){console.log("each ",l),r.append("file",e)}),Object.keys(s).map(function(e){r.append(e,s[e]||"")}),a.props.addEditPlace(r,a.props.history,a.props.languages[a.state.currLang].id).then(function(e){e=e.data,a.props.listPlacesByUserRole(),a.props.history.push("/admin/places/edit/"+e.id),a.props.addSuccessMessage("Successfully created place")}).catch(function(e){a.props.addErrorMessages(e)})}},a.state={currLang:a.props.currLang,name:"",short_name:"",company_name:"",company_eik:"",company_vat_registered:"",company_city:"",company_address:"",company_person:"",company_email:"",monthly_fee:"",additional_info:"",lat:"",lng:"",visible_on_map:0,is_paying:0,cityId:0,tags:[],clientId:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listClients(),this.props.getCities()}},{key:"validate",value:function(){var e=[];return 0===this.state.name.length&&e.push(this.props.translations.messages.errors.invalid_name),this.state.cityId||e.push(this.props.translations.messages.errors.invalid_city),e}},{key:"render",value:function(){return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.alergens)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/places"},this.props.translations.places.title)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.places.add),r.a.createElement("li",{className:"breadcrumb-menu d-md-down-none"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Button group"}))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(Lt,{clients:this.props.clients,onSubmit:this.onSubmit,onChange:this.onChange,onChangeCheckbox:this.onChangeCheckbox,onChangeSelectAutocompleteItems:this.onChangeSelectAutocompleteItems,onChangeSelectAutocomplete:this.onChangeSelectAutocomplete,onChangeSelectAutocompleteMulti:this.onChangeSelectAutocompleteMulti,place:this.state,isAdding:"1",translations:this.props.translations,currLang:this.state.currLang,languages:this.props.languages,cities:this.props.cities,tags:this.props.tags})))))))}}]),t}(l.Component),Ft=Object(E.c)(function(e){return{clients:e.clients.clients||[],translations:e.lang,languages:e.languages.languages||{},cities:e.places.cities||[],tags:[],currLang:e.settings.settings.default_lang&&e.settings.settings.default_lang.value||"bg"}},{addEditPlace:Se,addErrorMessages:ge,addSuccessMessage:be,listClients:At,listPlacesByUserRole:je,getCities:function(){return function(e){oe.a.get(de+"getCities").then(function(t){e({type:"GET_CITIES",payload:t.data})}).catch(function(e){})}}})(Pt),Dt=a(790),Rt=a(780),Ut=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.onChangeCheckbox=function(e){a.setState(Object(w.a)({},e.target.name,e.target.checked))},a.onChangeSelectAutocompleteItems=function(e){a.setState({clientId:e.value})},a.onChangeSelectAutocomplete=function(e,t){a.setState(Object(w.a)({},e,t.value))},a.onChangeSelectAutocompleteMulti=function(e,t){a.setState(Object(w.a)({},e,t))},a.onSubmit=function(e){e.preventDefault();var t=a.validate();if(t.length>0)a.props.addErrorMessages(t);else{var n=a.state.tags&&a.state.tags.map(function(e){return e.value})||[],s={id:a.state.id,name:a.state.name,short_name:a.state.short_name,company_name:a.state.company_name,company_eik:a.state.company_eik,company_vat_registered:a.state.company_vat_registered,company_city:a.state.company_city,company_address:a.state.company_address,company_person:a.state.company_person,company_email:a.state.company_email,monthly_fee:a.state.monthly_fee,additional_info:a.state.additional_info,lat:a.state.lat,lng:a.state.lng,visible_on_map:a.state.visible_on_map,is_paying:a.state.is_paying,cityId:a.state.cityId,tagsIds:JSON.stringify(n),clientId:a.state.clientId},l=Array.from(document.querySelector("#placeImg").files),r=new FormData;l.forEach(function(e,t){r.append("file",e)}),Object.keys(s).map(function(e){r.append(e,s[e]||"")}),a.props.addEditPlace(r).then(function(e){a.props.listPlacesByUserRole(),a.props.addSuccessMessage("Changes saved")}).catch(function(e){console.log(" ERRRORRING ",e),a.props.addErrorMessages(e)})}},a.currLangOnChange=function(e){var t=e.target.value,n=a.props.item.translations[t]&&a.props.item.translations[t].name?a.props.item.translations[t].name:"";a.setState({name:n,currLang:t})},a.state={currLang:a.props.currLang,id:a.props.item.id,name:a.props.item.name,short_name:a.props.item.short_name,company_name:a.props.item.company_name,company_eik:a.props.item.company_eik,company_vat_registered:a.props.item.company_vat_registered,company_city:a.props.item.company_city,company_address:a.props.item.company_address,company_person:a.props.item.company_person,company_email:a.props.item.company_email,monthly_fee:a.props.item.monthly_fee,additional_info:a.props.item.additional_info,image:a.props.item.image,lat:a.props.item.lat,lng:a.props.item.lng,visible_on_map:a.props.item.visible_on_map,is_paying:a.props.item.is_paying,cityId:a.props.item.cityId,tags:[],clientId:a.props.item.clientId?a.props.item.clientId:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listClients()}},{key:"componentWillReceiveProps",value:function(e){e.item.id&&this.setState({id:e.match.params.id,name:e.item.name,short_name:e.item.short_name,company_name:e.item.company_name,company_eik:e.item.company_eik,company_vat_registered:e.item.company_vat_registered,company_city:e.item.company_city,company_address:e.item.company_address,company_person:e.item.company_person,company_email:e.item.company_email,monthly_fee:e.item.monthly_fee,additional_info:e.item.additional_info,image:e.item.image,lat:e.item.lat,lng:e.item.lng,visible_on_map:e.item.visible_on_map,is_paying:e.item.is_paying,cityId:e.item.cityId,clientId:e.item.clientId?e.item.clientId:""});var t=[];0!==Object.keys(e.tags).length&&e.item.tags&&(e.item.tags.map(function(e){t.push({value:e.id,label:e.name})}),this.setState({tags:t}))}},{key:"validate",value:function(){var e=[];return 0===this.state.name.length&&e.push(this.props.translations.messages.errors.invalid_name),e}},{key:"render",value:function(){var e=this;return console.log("STATE ",this.state),r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/places"},this.props.translations.places.title)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.places.edit)),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement(Dt.a,{style:{width:"100%"},id:"controlled-tab-example",activeKey:this.state.currentTab,onSelect:function(t){return e.setState({currentTab:t})}},r.a.createElement(Rt.a,{style:{width:"1000px"},eventKey:"edit",title:this.props.translations.places.edit},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(Lt,{clients:this.props.clients,onSubmit:this.onSubmit,onChange:this.onChange,onChangeSelectAutocompleteItems:this.onChangeSelectAutocompleteItems,onChangeCheckbox:this.onChangeCheckbox,onChangeSelectAutocomplete:this.onChangeSelectAutocomplete,onChangeSelectAutocompleteMulti:this.onChangeSelectAutocompleteMulti,place:this.state,isAdding:"0",translations:this.props.translations,currLang:this.state.currLang,currLangOnChange:this.currLangOnChange,languages:this.props.languages,cities:this.props.cities,tags:this.props.tags})))))))))}}]),t}(l.Component),Bt=Object(E.c)(function(e,t){var a=t.match.params.id,n=e.places.places.find(function(e){return e.id==a});return n||(n={id:"",name:"",clientId:"",translations:{},tags:[]}),{clients:e.clients.clients||[],item:n,errors:[],translations:e.lang,languages:[],cities:[],tags:[],currLang:"bg"}},{addEditPlace:Se,listPlacesByUserRole:je,listClients:At,addErrorMessages:ge,addSuccessMessage:be})(Ut),Wt=function(e){return r.a.createElement("div",{className:"modal fade",id:"dangerModal"+e.id,tabIndex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-danger",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},e.translations.categories.delete.title),r.a.createElement("button",{className:"close",type:"button","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("p",null,e.translations.clients.delete.confirm," '",e.name,"'?")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("button",{className:"btn btn-secondary",type:"button","data-dismiss":"modal",style:{float:"left"}},e.translations.common.close),r.a.createElement("button",{className:"btn btn-danger fright",type:"button","data-dismiss":"modal",onClick:function(t){e.deleteClient(t,e.id)}},e.translations.common.delete)))))},Yt=function(e){return r.a.createElement("tr",{key:e.client.id},r.a.createElement("td",null,e.client.name),r.a.createElement("td",null,r.a.createElement("a",{href:"https://menu.tabl.bg/".concat(e.client.slug||""),target:"blank"},e.client.slug||"-")),r.a.createElement("td",null,e.client.contract_start_date&&nt()(e.client.contract_start_date).format("DD-MM-YYYY")||"-"),r.a.createElement("td",null,r.a.createElement(ne.a,{to:"/admin/clients/edit/"+e.client.id},r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button"},r.a.createElement("i",{className:"fas fa-edit"}))),r.a.createElement(Wt,{id:e.client.id,name:e.client.name,deleteClient:e.deleteClient,translations:e.translations})))},qt=function(e){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group reservation-list-search col-md-2 col-sm-4 "},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.common.name),r.a.createElement("input",{className:"form-control",id:"search_name",type:"text",placeholder:"",name:"search_name",onChange:e.onChange,value:e.search_name}))))))},Ht=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).deleteClient=function(e,t){e.preventDefault(),a.props.addEditClient({id:t,deleted:!0})},a.handlePageChange=function(e){a.props.dispatch(Object(y.push)("/admin/clients?page="+e))},a.onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value)),a.handlePageChange(1)},a.onChangeCheckbox=function(e,t){},a.activeDefaultLanguage="bg",a.state={search_name:"",search_active:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.items;this.state.search_name.length>0&&(t=Object.values(t).filter(function(t){return t.name.toLocaleLowerCase().includes(e.state.search_name.toLocaleLowerCase())}));var a=t.length,n=this.props.page,s=8*(n-1),l=0;return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.clients.title),r.a.createElement("li",{className:"breadcrumb-menu d-md-down-none"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Button group"},r.a.createElement("button",{onClick:function(){window.localStorage.clear(),window.location.reload()},className:"btn btn-default"},"Clear Local"),r.a.createElement(ne.a,{to:"/admin/clients/add",className:"btn"},r.a.createElement("i",{className:"fas fa-plus"})," \xa0 ",this.props.translations.clients.add)))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement(qt,{translations:this.props.translations,onChange:this.onChange}),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(Pe,null),r.a.createElement("table",{className:"table table-responsive-sm table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,this.props.translations.common.name),r.a.createElement("th",null,this.props.translations.common.slug),r.a.createElement("th",null,this.props.translations.clients.contract_start_date),r.a.createElement("th",null,this.props.translations.common.action))),r.a.createElement("tbody",null,t.map(function(t,a){if(a>=s&&l<8)return l++,r.a.createElement(Yt,{key:t.id,client:t,deleteClient:e.deleteClient,translations:e.props.translations,currLang:e.props.currLang,onChangeCheckbox:function(a){return e.onChangeCheckbox(a,t.id)}})}))),r.a.createElement(le.a,{className:"pagination",itemClass:"page-item",activePage:n,activeClass:"active",linkClass:"page-link",prevPageText:"<",nextPageText:">",firstPageText:"<<",lastPageText:">>",itemsCountPerPage:8,totalItemsCount:a,pageRangeDisplayed:5,onChange:this.handlePageChange}))))))))}}]),t}(l.Component),Gt=Object(E.c)(function(e,t){return{items:e.clients.clients||[],page:Number(e.router.location.query.page)||1,translations:e.lang,currLang:"bg"}},function(e,t){return Object(N.a)({dispatch:e},Object(v.b)({addEditClient:Tt,listClients:At},e))})(Ht),zt=a(71),Qt=a.n(zt),Jt=(a(590),function(e){function t(e){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=[];return t.push({value:null,label:"Choose client"}),e.clients.map(function(a){e.client.clientId==a.id&&{value:a.id,label:a.name},t.push({value:a.id,label:a.name})}),r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement(Pe,null),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.common.name),r.a.createElement("input",{className:"form-control",id:"name",type:"text",clientholder:e.translations.common.name,name:"name",onChange:e.onChange,value:e.client.name})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"slug"},e.translations.common.slug),r.a.createElement("input",{className:"form-control",id:"slug",type:"text",clientholder:e.translations.common.slug,name:"slug",onChange:e.onChange,value:e.client.slug})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"owner_name"},e.translations.clients.owner_name),r.a.createElement("input",{className:"form-control",id:"name",type:"text",clientholder:e.translations.clients.owner_name,name:"owner_name",onChange:e.onChange,value:e.client.owner_name})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"address"},e.translations.clients.address),r.a.createElement("input",{className:"form-control",id:"address",type:"text",clientholder:e.translations.common.address,name:"address",onChange:e.onChange,value:e.client.address})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:" col-form-label"},e.translations.clients.contract_start_date),r.a.createElement(Qt.a,{className:"form-control",selected:e.client.contract_start_date,onChange:function(t){return e.onFieldChange("contract_start_date",t)},dateFormat:"d-M-Y",style:{display:"block"}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:" col-form-label"},e.translations.clients.trial_start_date),r.a.createElement(Qt.a,{className:"form-control",selected:e.client.trial_start_date,onChange:function(t){return e.onFieldChange("trial_start_date",t)},dateFormat:"d-M-Y",style:{display:"block"}})),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:" col-form-label"},e.translations.clients.trial_end_date),r.a.createElement(Qt.a,{className:"form-control",selected:e.client.trial_end_date,onChange:function(t){return e.onFieldChange("trial_end_date",t)},dateFormat:"d-M-Y",style:{display:"block"}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"address"},e.translations.clients.additional_info),r.a.createElement("textarea",{className:"form-control",id:"address",type:"text",clientholder:e.translations.clients.additional_info,name:"additional_info",onChange:e.onChange},e.client.additional_info)))),r.a.createElement("div",{className:" row"},r.a.createElement("label",{className:"col-md-1 col-form-label"},e.translations.common.active),r.a.createElement("div",{className:"col-md-11 col-form-label"},r.a.createElement("label",{className:"switch switch-label switch-pill switch-outline-primary-alt"},r.a.createElement("input",{className:"switch-input",type:"checkbox",name:"active",onChange:e.onChangeCheckbox,checked:e.client.active}),r.a.createElement("span",{className:"switch-slider","data-checked":e.translations.common.yes,"data-unchecked":e.translations.common.no})))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("div",{className:"form-actions"},"1"==e.isAdding?"":r.a.createElement("button",{className:"btn btn-danger mright10",type:"button","data-toggle":"modal","data-target":"#dangerModal"+e.client.id},e.translations.common.delete),r.a.createElement(Wt,{id:e.client.id,name:e.client.name,deleteClient:e.deleteClient,translations:e.translations}),r.a.createElement(ne.a,{to:"/admin/clients"},r.a.createElement("button",{className:"btn btn-secondary",type:"button"},e.translations.common.cancel)),r.a.createElement("button",{className:"fright btn btn-primary",type:"submit"},"1"==e.isAdding?e.translations.common.add:e.translations.common.save))))}}]),t}(l.Component)),Vt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.onFieldChange=function(e,t){a.setState(Object(w.a)({},e,t))},a.onSubmit=function(e){e.preventDefault();var t=a.validate();if(t.length>0)a.props.addErrorMessages(t);else{var n={name:a.state.name,slug:a.state.slug,address:a.state.address,owner_name:a.state.owner_name,monthly_fee:a.state.monthly_fee,additional_info:a.state.additional_info,contract_start_date:a.state.contract_start_date,trial_start_date:a.state.trial_start_date,trial_end_date:a.state.trial_end_date,active:a.state.active,verified:1};a.props.addEditClient(n,a.props.history,a.props.languages[a.state.currLang].id)}},a.state={currLang:a.props.currLang,name:"",slug:"",owner_name:"",address:"",contract_start_date:"",trial_start_date:"",trial_end_date:"",monthly_fee:"",additional_info:"",active:1},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listClients()}},{key:"validate",value:function(){var e=[];return 0===this.state.name.length&&e.push(this.props.translations.messages.errors.invalid_name),0===this.state.slug.length&&e.push(this.props.translations.messages.errors.invalid_slug),e}},{key:"componentWillReceiveProps",value:function(e){this.setState({name:""})}},{key:"render",value:function(){return r.a.createElement("main",{id:"clients-page",className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.alergens)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/clients"},this.props.translations.clients.title)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.clients.add),r.a.createElement("li",{className:"breadcrumb-menu d-md-down-none"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Button group"}))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(Jt,{clients:this.props.clients,onSubmit:this.onSubmit,onChange:this.onChange,onFieldChange:this.onFieldChange,onChangeCheckbox:this.onChangeCheckbox,client:this.state,isAdding:"1",translations:this.props.translations,currLang:this.state.currLang,languages:this.props.languages})))))))}}]),t}(l.Component),Kt=Object(E.c)(function(e){return{clients:e.clients.clients||[],translations:e.lang,languages:e.languages.languages||{},currLang:e.settings.settings.default_lang&&e.settings.settings.default_lang.value||"bg"}},{addEditClient:Tt,addErrorMessages:ge,listClients:At})(Vt),Xt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.onChangeCheckbox=function(e){a.setState(Object(w.a)({},e.target.name,e.target.checked))},a.onFieldChange=function(e,t){a.setState(Object(w.a)({},e,t))},a.onSubmit=function(e){e.preventDefault();var t=a.validate();if(t.length>0)a.props.addErrorMessages(t);else{var n={id:a.state.id,name:a.state.name,slug:a.state.slug,address:a.state.address,owner_name:a.state.owner_name,monthly_fee:a.state.monthly_fee,additional_info:a.state.additional_info,contract_start_date:a.state.contract_start_date,trial_start_date:a.state.trial_start_date,trial_end_date:a.state.trial_end_date,active:a.state.active};a.props.addEditClient(n,a.props.history,a.props.languages[a.state.currLang].id)}},a.state={currLang:a.props.currLang,id:a.props.item.id,name:a.props.item.name,owner_name:a.props.item.owner_name,address:a.props.item.address,contract_start_date:a.props.item.contract_start_date&&nt()(a.props.item.contract_start_date).toDate()||"",trial_start_date:a.props.item.trial_start_date&&nt()(a.props.item.trial_start_date).toDate()||"",trial_end_date:a.props.item.trial_end_date&&nt()(a.props.item.trial_end_date).toDate()||"",monthly_fee:a.props.item.monthly_fee,additional_info:a.props.item.additional_info,active:a.props.item.active},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listClients()}},{key:"componentWillReceiveProps",value:function(e){e.item.id&&this.setState({id:e.match.params.id,name:e.item.name,slug:e.item.slug,owner_name:e.item.owner_name,address:e.item.address,contract_start_date:e.item.contract_start_date&&nt()(e.item.contract_start_date).toDate()||"",trial_start_date:e.item.trial_start_date&&nt()(e.item.trial_start_date).toDate()||"",trial_end_date:e.item.trial_end_date&&nt()(e.item.trial_end_date).toDate()||"",monthly_fee:e.item.monthly_fee,additional_info:e.item.additional_info,active:e.item.active})}},{key:"validate",value:function(){var e=[];return 0===this.state.name.length&&e.push(this.props.translations.messages.errors.invalid_name),0===this.state.slug.length&&e.push(this.props.translations.messages.errors.invalid_slug),e}},{key:"render",value:function(){var e=this;return r.a.createElement("main",{id:"clients-page",className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/clients"},this.props.translations.clients.title)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.clients.edit)),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(Dt.a,{style:{width:"100%"},id:"controlled-tab-example",activeKey:this.state.currentTab,onSelect:function(t){return e.setState({currentTab:t})}},r.a.createElement(Rt.a,{eventKey:"edit",title:this.props.translations.clients.edit},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(Jt,{clients:this.props.clients,onSubmit:this.onSubmit,onChange:this.onChange,onFieldChange:this.onFieldChange,onChangeCheckbox:this.onChangeCheckbox,client:this.state,isAdding:"0",translations:this.props.translations,currLang:this.state.currLang,currLangOnChange:this.currLangOnChange,languages:this.props.languages})))))))))))}}]),t}(l.Component),Zt=Object(E.c)(function(e,t){var a=t.match.params.id,n=e.clients.clients.find(function(e){return e.id==a});return n||(n={id:"",name:"",slug:"",address:"",owner_name:"",monthly_fee:"",additional_info:"",contract_start_date:"",trial_start_date:"",trial_end_date:"",active:1}),{clients:e.clients.clients||[],item:n,errors:e.alergens.errors,translations:e.lang,languages:e.languages.languages||{},currLang:"bg"}},{addEditClient:Tt,listClients:At,addErrorMessages:ge})(Xt),$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(a){Oe()(Ne.getToken());var n="?";e&&(n+="date="+(e=nt()(e).format("YYYY-MM-DD"))),t&&(n+="&userId="+t),oe.a.get(de+"tasks".concat(n)).then(function(e){a({type:"LIST_TASKS",payload:e&&e.data?e.data:[]})}).catch(function(e){throw e})}},ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){Oe()(Ne.getToken());var a="?";e&&(a+="token="+e),oe.a.get(de+"userTasks".concat(a)).then(function(e){t({type:"LIST_TASKS",payload:e&&e.data?e.data:[]})}).catch(function(e){throw e})}},ta=function(e){return function(t){return e.place_id||(e.place_id=Ne.getUserPlace()),oe.a.post(de+"tasks",e)}},aa=function(e){var t=[{value:"",label:"\u0412\u0441\u0438\u0447\u043a\u0438"}];return Object.values(e.users).map(function(e){t.push({value:e.id,label:e.email})}),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group reservation-list-search col-md-2 col-sm-4 "},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"date"},e.translations.common.date),r.a.createElement("br",null),r.a.createElement(Qt.a,{className:"form-control vertical-center",selected:e.search_date,onChange:function(t){return e.onFieldChange("search_date",t)},dateFormat:"d-M-Y",style:{display:"block"}}))),r.a.createElement("div",{className:"col-md-2 col-sm-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"parentId"},e.translations.common.user),r.a.createElement(Fe.a,{value:e.search_user,name:"colors",options:t,className:"basic-multi-select",classNamePrefix:"select",onChange:function(t){return e.onFieldChange("search_user",t)}}))),r.a.createElement("div",{className:"form-group reservation-list-search col-md-2 col-sm-4 "},r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-info",onClick:e.filter,style:{marginTop:28}},e.translations.common.filter))))))},na=function(e){return r.a.createElement("tr",{key:e.task.id},r.a.createElement("td",null,e.task.name),r.a.createElement("td",null,e.task.description),r.a.createElement("td",null,e.task.checkpoint&&e.task.checkpoint.name||"-"),r.a.createElement("td",null,void 0!=typeof e.task.users&&e.task.users&&e.task.users.length>0&&e.task.users.map(function(t){return r.a.createElement("p",{key:t.id},t.visits&&t.visits.length<e.task.times_per_day_of_task_execution?r.a.createElement("button",{className:"btn btn-danger",disabled:!0,type:"submit"},t.email," - ",e.translations.tasks.not_completed,e.task.times_per_day_of_task_execution>1?r.a.createElement(r.a.Fragment,null,"( ",t.visits&&t.visits.length||0," / ",e.task.times_per_day_of_task_execution,")"):null):r.a.createElement("button",{className:" btn btn-success",type:"submit",onClick:function(){return e.openVisitDetailsModal(e.task,t)}},t.email," - ",e.translations.tasks.completed," (",t.visits&&t.visits.length||0," / ",e.task.times_per_day_of_task_execution,")",r.a.createElement("br",null),r.a.createElement("span",{style:{fontSize:10}},"(\u043a\u043b\u0438\u043a\u043d\u0438 \u0437\u0430 \u0434\u0435\u0439\u0442\u0430\u0439\u043b\u0438)")))})||"\u041d\u044f\u043c\u0430 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0438"),r.a.createElement("td",null,r.a.createElement(ne.a,{to:"/admin/"+"checkpoints/".concat(e.task.checkpointId,"/tasks/").concat(e.task.id,"/edit")},r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button"},r.a.createElement("i",{className:"fas fa-edit",title:"\u041f\u0440\u043e\u043c\u044f\u043d\u0430 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0430"})))))},sa=a(773),la=a(783),ra=a(781),oa=a(148),ca=a.n(oa),ia=a(791),ma=a(782),da=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(ia.a,{fullWidth:!0,maxWidth:"xs",open:this.props.isOpened,onClose:this.props.onClose,"aria-labelledby":"max-width-dialog-title",TransitionComponent:ma.a,"data-class":"dialog-container"},r.a.createElement(ra.a,{in:!0,timeout:{enter:385,exit:190}},r.a.createElement(la.a,{style:{margin:0}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h4",null,"\u0414\u0435\u0442\u0430\u0439\u043b\u0438:"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("b",null,"\u0417\u0430\u0434\u0430\u0447\u0430:")),r.a.createElement("div",{className:"col-md-6"},this.props.task.name),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("b",null,"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b:")),r.a.createElement("div",{className:"col-md-6"},this.props.user.email),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("hr",null)),this.props.user.visits&&this.props.user.visits.map(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h4",{style:{marginTop:10}},"\u041f\u043e\u0441\u0435\u0449\u0435\u043d\u0438\u0435")),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("b",null,"\u0412\u0440\u0435\u043c\u0435:")),r.a.createElement("div",{className:"col-md-9"},nt()(e.createdAt).format("YYYY-MM-DD HH:mm")),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("b",null,"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440:")),r.a.createElement("div",{className:"col-md-9"},e.comment||"-"))})))))}}]),t}(l.Component),pa=Object(sa.a)()(Object(E.c)(function(e,t){return{translations:e.lang.translations}},{})(da)),ua=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).deleteTask=function(e,t){e.preventDefault(),a.props.addEditTask({id:t,deleted:!0})},a.handlePageChange=function(e){a.props.dispatch(Object(y.push)("/admin/tasks?page="+e))},a.onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value)),a.handlePageChange(1)},a.onFieldChange=function(e,t){a.setState(Object(w.a)({},e,t))},a.onChangeCheckbox=function(e,t){e.preventDefault(),a.props.addEditTask({id:t,is_paying:e.target.checked}),a.props.listTasksByUserRole()},a.filter=function(){a.props.listAllTasks(a.state.search_date,a.state.search_user&&a.state.search_user.value||null)},a.openVisitDetailsModal=function(e,t){a.setState({clickedTask:e,clickedUser:t,visitDetailsModalOpened:!0}),console.log(e,t)},a.activeDefaultLanguage="bg",a.state={search_date:nt()().toDate(),search_user:"",visitDetailsModalOpened:!1,clickedTask:"",clickedUser:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listAllTasks(),this.props.listUsers()}},{key:"render",value:function(){var e=this,t=Object.values(this.props.items),a=t.length,n=this.props.page,s=8*(n-1),l=0;return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.tasks.title),r.a.createElement("li",{className:"breadcrumb-menu d-md-down-none"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Button group"}))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement(aa,{translations:this.props.translations,onChange:this.onChange,onFieldChange:this.onFieldChange,search_date:this.state.search_date,filter:this.filter,users:this.props.users}),r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(Pe,null),r.a.createElement("table",{className:"table table-responsive-sm table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,this.props.translations.common.name),r.a.createElement("th",null,this.props.translations.common.description),r.a.createElement("th",null,this.props.translations.tasks.checkpoint),r.a.createElement("th",null,this.props.translations.common.user),r.a.createElement("th",null,this.props.translations.common.action))),r.a.createElement("tbody",null,Object.values(t).map(function(t,a){if(a>=s&&l<8)return l++,r.a.createElement(na,{key:t.id,task:t,deleteTask:e.deleteTask,onFieldChange:e.onFieldChange,openVisitDetailsModal:e.openVisitDetailsModal,translations:e.props.translations,currLang:e.props.currLang})}))),r.a.createElement(pa,{isOpened:this.state.visitDetailsModalOpened,onClose:function(){return e.setState({visitDetailsModalOpened:!1})},task:this.state.clickedTask,user:this.state.clickedUser}),r.a.createElement(le.a,{className:"pagination",itemClass:"page-item",activePage:n,activeClass:"active",linkClass:"page-link",prevPageText:"<",nextPageText:">",firstPageText:"<<",lastPageText:">>",itemsCountPerPage:8,totalItemsCount:a,pageRangeDisplayed:5,onChange:this.handlePageChange}))))))))}}]),t}(l.Component),ha=Object(E.c)(function(e,t){return{items:e.tasks.tasks||[],users:e.users.users||[],page:Number(e.router.location.query.page)||1,translations:e.lang,currLang:"bg"}},function(e,t){return Object(N.a)({dispatch:e},Object(v.b)({listAllTasks:$t,addEditTask:ta,listUsers:Ue},e))})(ua),ga=function(e){return r.a.createElement("div",{className:"modal fade",id:"dangerModal"+e.id,tabIndex:"-1",role:"dialog","aria-labelledby":"myModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-danger",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Delete ",e.title," ?"),r.a.createElement("button",{className:"close",type:"button","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("p",null,"Are you sure you want to delete '",e.title,"'?")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("button",{className:"btn btn-secondary",type:"button","data-dismiss":"modal"},"Close"),r.a.createElement("button",{className:"btn btn-danger fright",type:"button","data-dismiss":"modal",onClick:function(t){e.deleteFunc(t,e.id)}},"Delete")))))},ba=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).addUploadedFileText=function(e){e&&e.target&&e.target.files&&e.target.files[0]&&e.target.files[0].name&&a.setState({uploadedImgName:e.target.files[0].name})},a.state={uploadedImgName:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t,a=this.props,n=[];n.push({value:null,label:"Choose client"}),console.log("AUTO ",a.place),a.clients.map(function(t){a.place.clientId==t.id&&(e={value:t.id,label:t.name}),n.push({value:t.id,label:t.name})});var s=[];s.push({value:null,label:"Choose city"}),a.cities.map(function(e){a.place.cityId==e.id&&(t={value:e.id,label:e.name}),s.push({value:e.id,label:e.name})});var l,o=[];return a.tags.map(function(e){o.push({value:e.id,label:e.name})}),"0"==a.isAdding&&a.place.image&&a.place.image.length>0&&(l=r.a.createElement("img",{src:rt.getPlaceImagePath(a.place.image),className:"editPagesImage"})),r.a.createElement("form",{onSubmit:a.onSubmit},r.a.createElement(Pe,null),r.a.createElement("div",{className:"card-body"},r.a.createElement(Mt,{isDisabled:1==a.isAdding?1:"",currLangOnChange:a.currLangOnChange,currLang:a.currLang,languages:a.languages}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement("label",{htmlFor:"parentId"},a.translations.common.client),r.a.createElement(Fe.a,{name:"parentId",options:n,onChange:a.onChangeSelectAutocompleteItems,value:e,placeholder:"Client"})),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},a.translations.invoices.name),r.a.createElement("input",{className:"form-control",id:"name",type:"text",placeholder:a.translations.common.name,name:"name",onChange:a.onChange,value:a.place.name}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"short_name"},a.translations.invoices.short_name),r.a.createElement("input",{className:"form-control",id:"short_name",type:"text",placeholder:a.translations.common.short_name,name:"short_name",onChange:a.onChange,value:a.place.short_name}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_name"},a.translations.invoices.company_name),r.a.createElement("input",{className:"form-control",type:"text",placeholder:a.translations.places.company_name,name:"company_name",onChange:a.onChange,value:a.place.company_name}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_name"},a.translations.invoices.company_eik),r.a.createElement("input",{className:"form-control",type:"text",placeholder:a.translations.places.company_eik,name:"company_eik",onChange:a.onChange,value:a.place.company_eik}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_city"},a.translations.invoices.company_city),r.a.createElement("input",{className:"form-control",type:"text",name:"company_city",onChange:a.onChange,value:a.place.company_city}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_address"},a.translations.invoices.company_address),r.a.createElement("input",{className:"form-control",type:"text",name:"company_address",onChange:a.onChange,value:a.place.company_address}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_person"},a.translations.invoices.company_person),r.a.createElement("input",{className:"form-control",type:"text",name:"company_person",onChange:a.onChange,value:a.place.company_person}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_email"},a.translations.places.company_email),r.a.createElement("input",{className:"form-control",type:"text",name:"company_email",onChange:a.onChange,value:a.place.company_email}))),r.a.createElement("div",{className:"col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"monthly_fee"},a.translations.invoices.price),r.a.createElement("input",{className:"form-control",type:"text",name:"monthly_fee",onChange:a.onChange,value:a.place.monthly_fee}))),r.a.createElement("div",{className:"col-lg-3 col-md-3 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"company_vat_registered"},a.translations.invoices.company_vat_registered),r.a.createElement("label",{className:"switch switch-label switch-pill switch-outline-primary-alt"},r.a.createElement("input",{className:"switch-input",type:"checkbox",name:"company_vat_registered",onChange:a.onChangeCheckbox,checked:a.place.company_vat_registered}),r.a.createElement("span",{className:"switch-slider","data-checked":a.translations.common.yes,"data-unchecked":a.translations.common.no})))),r.a.createElement("div",{className:"col-lg-3 col-md-3 col-sm-12"},r.a.createElement("label",null,a.translations.common.is_paying),r.a.createElement("label",{className:"switch switch-label switch-pill switch-outline-primary-alt"},r.a.createElement("input",{className:"switch-input",type:"checkbox",name:"is_paying",onChange:a.onChangeCheckbox,checked:a.place.is_paying}),r.a.createElement("span",{className:"switch-slider","data-checked":a.translations.common.yes,"data-unchecked":a.translations.common.no}))),r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"additional_info"},a.translations.places.additional_info),r.a.createElement("textarea",{className:"form-control",name:"additional_info",onChange:a.onChange,value:a.place.additional_info}))),r.a.createElement("div",{className:"col-md-6 col-sm-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"lat"},a.translations.places.lat),r.a.createElement("input",{className:"form-control",type:"text",name:"lat",onChange:a.onChange,value:a.place.lat}))),r.a.createElement("div",{className:"col-md-6 col-sm-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"lng"},a.translations.places.lng),r.a.createElement("input",{className:"form-control",type:"text",name:"lng",onChange:a.onChange,value:a.place.lng}))),r.a.createElement("div",{className:"form-group col-sm-6"},r.a.createElement("label",{htmlFor:"parentId"},a.translations.places.city),r.a.createElement(Fe.a,{name:"cityId",options:s,onChange:function(e){return a.onChangeSelectAutocomplete("cityId",e)},value:t,placeholder:"City"})),r.a.createElement("div",{className:"col-lg-6 col-md-6 col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"visible_on_map"},a.translations.places.visible_on_map),r.a.createElement("label",{className:"switch switch-label switch-pill switch-outline-primary-alt"},r.a.createElement("input",{className:"switch-input",type:"checkbox",name:"visible_on_map",onChange:a.onChangeCheckbox,checked:a.place.visible_on_map}),r.a.createElement("span",{className:"switch-slider","data-checked":a.translations.common.yes,"data-unchecked":a.translations.common.no})))),r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement("label",{htmlFor:"catHierarchyId"},a.translations.places.tags),r.a.createElement(Fe.a,{value:a.place.tags,isMulti:!0,name:"colors",options:o,className:"basic-multi-select",classNamePrefix:"select",onChange:function(e){return a.onChangeSelectAutocompleteMulti("tags",e)}})),r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement("label",{className:"col-md-1 col-form-label vertical-center",htmlFor:"file-multiple-input"},a.translations.common.image),r.a.createElement("div",{className:"col-md-5 col-form-label vertical-center",style:{justifyContent:"center"}},r.a.createElement("input",{type:"file",name:"file",id:"placeImg",multiple:!0,ref:"image",style:{display:"none"},onChange:this.addUploadedFileText}),r.a.createElement("label",{for:"placeImg",type:"button",className:"btn btn-secondary",style:{borderBottomLeftRadius:0,borderBottomRightRadius:0,margin:0}},!a.isAdding&&a.place.image&&a.place.image.length>0?a.translations.products.replace_image:a.translations.products.upload_image),l,this.state.uploadedImgName))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("div",{className:"form-actions"},"1"==a.isAdding?"":r.a.createElement("button",{className:"btn btn-danger mright10",type:"button","data-toggle":"modal","data-target":"#dangerModal"+a.place.id},a.translations.common.delete),r.a.createElement(ga,{id:a.place.id,title:a.place.name,deleteFunc:a.deletePlace,translations:a.translations}),r.a.createElement(ne.a,{to:"/admin/places"},r.a.createElement("button",{className:"btn btn-secondary",type:"button"},a.translations.common.cancel)),r.a.createElement("button",{className:"fright btn btn-primary",type:"submit"},"1"==a.isAdding?a.translations.common.add:a.translations.common.save))))}}]),t}(l.Component),Ea=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.onChangeCheckbox=function(e){a.setState(Object(w.a)({},e.target.name,e.target.checked))},a.onChangeSelectAutocompleteItems=function(e){a.setState({clientId:e.value})},a.onChangeSelectAutocomplete=function(e,t){a.setState(Object(w.a)({},e,t.value))},a.onChangeSelectAutocompleteMulti=function(e,t){a.setState(Object(w.a)({},e,t))},a.onSubmit=function(e){e.preventDefault();var t=a.validate();if(t.length>0)a.props.addErrorMessages(t);else{var n=a.state.tags.map(function(e){return e.value}),s={name:a.state.name,short_name:a.state.short_name,company_name:a.state.company_name,company_eik:a.state.company_eik,company_vat_registered:a.state.company_vat_registered,company_city:a.state.company_city,company_address:a.state.company_address,company_person:a.state.company_person,company_email:a.state.company_email,monthly_fee:a.state.monthly_fee,additional_info:a.state.additional_info,lat:a.state.lat,lng:a.state.lng,visible_on_map:a.state.visible_on_map,is_paying:a.state.is_paying,cityId:a.state.cityId,tagsIds:n,clientId:a.state.clientId},l=Array.from(document.querySelector("#taskImg").files);console.log("FILES ",l);var r=new FormData;l.forEach(function(e,t){console.log("each ",l),r.append("file",e)}),Object.keys(s).map(function(e){r.append(e,s[e]||"")}),a.props.addEditTask(r,a.props.history,a.props.languages[a.state.currLang].id).then(function(e){e=e.data,a.props.listTasksByUserRole(),a.props.history.push("/admin/tasks/edit/"+e.id),a.props.addSuccessMessage("Successfully created task")}).catch(function(e){a.props.addErrorMessages(e)})}},a.state={currLang:a.props.currLang,name:"",short_name:"",company_name:"",company_eik:"",company_vat_registered:"",company_city:"",company_address:"",company_person:"",company_email:"",monthly_fee:"",additional_info:"",lat:"",lng:"",visible_on_map:0,is_paying:0,cityId:0,tags:[],clientId:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listAllTasks()}},{key:"validate",value:function(){var e=[];return 0===this.state.name.length&&e.push(this.props.translations.messages.errors.invalid_name),this.state.cityId||e.push(this.props.translations.messages.errors.invalid_city),e}},{key:"render",value:function(){return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.alergens)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/tasks"},this.props.translations.tasks.title)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.tasks.add),r.a.createElement("li",{className:"breadcrumb-menu d-md-down-none"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Button group"}))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(ba,{clients:this.props.clients,onSubmit:this.onSubmit,onChange:this.onChange,onChangeCheckbox:this.onChangeCheckbox,onChangeSelectAutocompleteItems:this.onChangeSelectAutocompleteItems,onChangeSelectAutocomplete:this.onChangeSelectAutocomplete,onChangeSelectAutocompleteMulti:this.onChangeSelectAutocompleteMulti,task:this.state,isAdding:"1",translations:this.props.translations,currLang:this.state.currLang,languages:this.props.languages,cities:this.props.cities,tags:this.props.tags})))))))}}]),t}(l.Component),fa=Object(E.c)(function(e){return{tasks:e.tasks.tasks||[],translations:e.lang,languages:e.languages.languages||{},currLang:e.settings.settings.default_lang&&e.settings.settings.default_lang.value||"bg"}},{listAllTasks:$t,addEditTask:ta,addErrorMessages:ge,addSuccessMessage:be})(Ea),va=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.onChangeCheckbox=function(e){a.setState(Object(w.a)({},e.target.name,e.target.checked))},a.onChangeSelectAutocompleteItems=function(e){a.setState({clientId:e.value})},a.onChangeSelectAutocomplete=function(e,t){a.setState(Object(w.a)({},e,t.value))},a.onChangeSelectAutocompleteMulti=function(e,t){a.setState(Object(w.a)({},e,t))},a.onSubmit=function(e){e.preventDefault();var t=a.validate();if(t.length>0)a.props.addErrorMessages(t);else{var n=a.state.tags&&a.state.tags.map(function(e){return e.value})||[],s={id:a.state.id,name:a.state.name,short_name:a.state.short_name,company_name:a.state.company_name,company_eik:a.state.company_eik,company_vat_registered:a.state.company_vat_registered,company_city:a.state.company_city,company_address:a.state.company_address,company_person:a.state.company_person,company_email:a.state.company_email,monthly_fee:a.state.monthly_fee,additional_info:a.state.additional_info,lat:a.state.lat,lng:a.state.lng,visible_on_map:a.state.visible_on_map,is_paying:a.state.is_paying,cityId:a.state.cityId,tagsIds:JSON.stringify(n),clientId:a.state.clientId},l=Array.from(document.querySelector("#taskImg").files),r=new FormData;l.forEach(function(e,t){r.append("file",e)}),Object.keys(s).map(function(e){r.append(e,s[e]||"")}),a.props.addEditTask(r).then(function(e){a.props.listTasksByUserRole(),a.props.addSuccessMessage("Changes saved")}).catch(function(e){console.log(" ERRRORRING ",e),a.props.addErrorMessages(e)})}},a.currLangOnChange=function(e){var t=e.target.value,n=a.props.item.translations[t]&&a.props.item.translations[t].name?a.props.item.translations[t].name:"";a.setState({name:n,currLang:t})},a.state={currLang:a.props.currLang,id:a.props.item.id,name:a.props.item.name,short_name:a.props.item.short_name,company_name:a.props.item.company_name,company_eik:a.props.item.company_eik,company_vat_registered:a.props.item.company_vat_registered,company_city:a.props.item.company_city,company_address:a.props.item.company_address,company_person:a.props.item.company_person,company_email:a.props.item.company_email,monthly_fee:a.props.item.monthly_fee,additional_info:a.props.item.additional_info,image:a.props.item.image,lat:a.props.item.lat,lng:a.props.item.lng,visible_on_map:a.props.item.visible_on_map,is_paying:a.props.item.is_paying,cityId:a.props.item.cityId,tags:[],clientId:a.props.item.clientId?a.props.item.clientId:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listAllTasks()}},{key:"componentWillReceiveProps",value:function(e){e.item.id&&this.setState({id:e.match.params.id,name:e.item.name,short_name:e.item.short_name,company_name:e.item.company_name,company_eik:e.item.company_eik,company_vat_registered:e.item.company_vat_registered,company_city:e.item.company_city,company_address:e.item.company_address,company_person:e.item.company_person,company_email:e.item.company_email,monthly_fee:e.item.monthly_fee,additional_info:e.item.additional_info,image:e.item.image,lat:e.item.lat,lng:e.item.lng,visible_on_map:e.item.visible_on_map,is_paying:e.item.is_paying,cityId:e.item.cityId,clientId:e.item.clientId?e.item.clientId:""});var t=[];0!==Object.keys(e.tags).length&&e.item.tags&&(e.item.tags.map(function(e){t.push({value:e.id,label:e.name})}),this.setState({tags:t}))}},{key:"validate",value:function(){var e=[];return 0===this.state.name.length&&e.push(this.props.translations.messages.errors.invalid_name),this.state.cityId||e.push(this.props.translations.messages.errors.invalid_city),e}},{key:"render",value:function(){var e=this;return console.log("STATE ",this.state),r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/tasks"},this.props.translations.tasks.title)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.tasks.edit)),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement(Dt.a,{style:{width:"100%"},id:"controlled-tab-example",activeKey:this.state.currentTab,onSelect:function(t){return e.setState({currentTab:t})}},r.a.createElement(Rt.a,{style:{width:"1000px"},eventKey:"edit",title:this.props.translations.tasks.edit},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(ba,{clients:this.props.clients,onSubmit:this.onSubmit,onChange:this.onChange,onChangeSelectAutocompleteItems:this.onChangeSelectAutocompleteItems,onChangeCheckbox:this.onChangeCheckbox,onChangeSelectAutocomplete:this.onChangeSelectAutocomplete,onChangeSelectAutocompleteMulti:this.onChangeSelectAutocompleteMulti,task:this.state,isAdding:"0",translations:this.props.translations,currLang:this.state.currLang,currLangOnChange:this.currLangOnChange,languages:this.props.languages,cities:this.props.cities,tags:this.props.tags})))))))))}}]),t}(l.Component),_a=Object(E.c)(function(e,t){var a=t.match.params.id,n=e.tasks.tasks.find(function(e){return e.id==a});return n||(n={id:"",name:"",clientId:"",translations:{},tags:[]}),{tasks:e.tasks.tasks||[],item:n,errors:e.alergens.errors,translations:e.lang,languages:e.languages.languages||{},currLang:"bg"}},{addEditTask:ta,listAllTasks:$t})(va),ya=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){var a="";0==e&&(a+="?place_id="+(e=Ne.getUserPlace())),oe.a.get(de+"checkpoints"+a).then(function(e){return t({type:"LIST_CHECKPOINTS",payload:e&&e.data||[]})}).catch(function(e){console.log("erroring ",e)})}},ka=function(e){return function(t){return e.place_id||(e.place_id=Ne.getUserPlace()),oe.a.post(de+"checkpoints?host=".concat(window.location.origin),e)}},Na=function(e,t,a){return function(n){var s={};s.text=e,s.callbackSuccess=t,s.callbackFail=a,n({type:"OPEN_CONFIRM_MODAL",payload:s})}},Ca=function(e){return r.a.createElement("tr",{key:e.task.id},r.a.createElement("td",null,e.task.name),r.a.createElement("td",null,e.task.description),r.a.createElement("td",null,e.task.rotation_start_date&&nt()(e.task.rotation_start_date).format("D-M-Y")||""),r.a.createElement("td",null,e.task.rotation_days_count),r.a.createElement("td",null,e.task.times_per_day_of_task_execution),r.a.createElement("td",null,r.a.createElement(ne.a,{to:"/admin/"+"checkpoints/".concat(e.checkpointId,"/tasks/").concat(e.task.id,"/edit")},r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button"},r.a.createElement("i",{className:"fas fa-edit",title:"\u041f\u0440\u043e\u043c\u044f\u043d\u0430"}))),r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button","data-toggle":"modal","data-target":"#dangerModal"+e.task.id},r.a.createElement("i",{className:"fas fa-trash",title:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0430"})),r.a.createElement(ga,{id:e.task.id,title:e.task.name,deleteFunc:e.deleteCheckpoint})))},Oa=a(101),ja=a.n(Oa),Sa=a(95),Ia=a.n(Sa),xa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).deleteTask=function(e,t){e.preventDefault();var n={id:t,deleted:1};a.props.addEditTask(n).then(function(e){a.props.listCheckpoints(),a.props.addSuccessMessage("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u0442\u0440\u0438\u0445\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0430")}).catch(function(e){a.props.addErrorMessages(e.response.data.error.errors)})},a.handlePageChange=function(e){a.props.dispatch(Object(y.push)("/admin/checkpoints/"+a.props.checkpointId+"/tasks?page="+e))},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listUserTasks(this.props.token),this.props.listCheckpoints()}},{key:"render",value:function(){var e=this,t=this.props.tasksForCheckpoint,a=Object.keys(t).length,n=this.props.page,s=8*(n-1),l=0;return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"}),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement(Pe,null),r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table table-responsive-sm table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,this.props.translations.common.name),r.a.createElement("th",null,this.props.translations.tasks.description),r.a.createElement("th",null,this.props.translations.tasks.rotation_start_date),r.a.createElement("th",null,this.props.translations.tasks.rotation_days_count),r.a.createElement("th",null,this.props.translations.tasks.times_per_day_of_task_execution),r.a.createElement("th",null,this.props.translations.common.action))),r.a.createElement("tbody",null,Object.values(t).map(function(t,a){if(a>=s&&l<8)return l++,r.a.createElement(Ca,{key:t.id,checkpointId:e.props.checkpointId,task:t,deleteTask:e.deleteTask,translations:e.props.translations})}))),r.a.createElement(le.a,{className:"pagination",itemClass:"page-item",activePage:n,activeClass:"active",linkClass:"page-link",prevPageText:"<",nextPageText:">",firstPageText:"<<",lastPageText:">>",itemsCountPerPage:8,totalItemsCount:a,pageRangeDisplayed:5,onChange:this.handlePageChange}))))))))}}]),t}(l.Component),wa=Object(E.c)(function(e,t){return{token:t.match.params.token,tasksForCheckpoint:[],page:Number(e.router.location.query.page)||1,translations:e.lang}},function(e,t){return Object(N.a)({dispatch:e},Object(v.b)({listCheckpoints:ya,addEditCheckpoint:ka,openConfirmModal:Na,addErrorMessages:ge,addSuccessMessage:be,listUserTasks:ea},e))})(xa),Aa=(a(677),function(e){return function(t){Oe()(Ne.getToken());return oe.a.post(de+"visits".concat("?"),e)}}),Ta=a(784),Ma=function(e){var t,a;return{backdrop:{zIndex:2,color:"#fff",position:"absolute !important"},modal:{"& .MuiPaper-root":{width:"100% !important"},"& .MuiDialogContent-root":{paddingTop:5,paddingBottom:0}},modalTitle:{backgroundColor:"rgb(203,65,2)",zIndex:1},textFieldContainer:{display:"block",margin:"15px 0","&:nth-of-type(1)":{marginTop:10},"&:last-child":{marginBottom:0},"& .MuiFormLabel-root:not(.MuiInputLabel-root)":{fontWeight:"bold"}},textField:{width:"100%","& label.Mui-error":{color:"rgba(0, 0, 0, 0.54)"},"& label.Mui-focused":{color:"rgba(254, 105, 2, 0.7)"},"& .MuiInput-underline:after":{borderBottomColor:"rgb(117 117 117)"},"& .MuiInput-underline.Mui-error:after":{borderBottomColor:"#f44336"}},promocodeAppliedSuccess:{"& .MuiInput-input":{fontWeight:"bold",color:"green"}},promocodeAppliedFail:{"& .MuiInput-input":{fontWeight:"bold",color:"red"}},errorContainer:{color:"#ff0c00f0",textAlign:"center",fontWeight:"bold",borderBottom:"1px solid #ff0c00f0",marginTop:17,marginBottom:5},orderCheckbox:{margin:0,color:"rgb(254, 105, 2)","&.Mui-checked":{color:"rgb(254, 105, 2)"}},orderRadio:{margin:0,color:"rgb(254, 105, 2)","&.Mui-checked":{color:"rgb(254, 105, 2)"}},promoCodeBtn:{color:"rgba(0, 0, 0, 0.54)",float:"right",borderRadius:0,padding:"10px 0",display:"flex","&:hover":{backgroundColor:"transparent"}},applyPromoCodeBtn:{textAlign:"center",width:"100%",borderRadius:0,borderBottom:"1px solid rgba(0, 0, 0, 0.42)"},buttonsRow:{marginBottom:0},paymentMethodContainer:{marginTop:30,marginBottom:"10px !important"},cutleryOptionContainer:{marginBottom:"10px !important"},orderLabel:{"&.Mui-focused":{color:"rgba(0, 0, 0, 0.54)"}},promoCodeRow:{marginTop:10,marginBottom:5,"@media screen and (max-width: 345px)":{marginTop:25}},preorderAddressContainer:{marginTop:10},preorderAddress:{marginTop:5,borderRadius:5,backgroundColor:"#e6e6e6",padding:"5px 11px",display:"grid","grid-template-columns":"70% 30%"},preorderAddressText:{placeSelf:"center",textAlign:"center",padding:5},preorderAddressNavigateBtn:{width:"100%",placeSelf:"center",verticalAlign:"bottom",borderLeft:"1px solid #ccc",textAlign:"center"},preorderAddressNavigateIcon:{fontSize:30,color:"#0064ac"},orderTimeOptionsContainer:{display:"grid",gridTemplateColumns:"47% 47%",columnGap:"6%"},orderDisabledContainer:(t={background:"gray",width:"95%"},Object(w.a)(t,"background","gray"),Object(w.a)(t,"margin","0 auto"),Object(w.a)(t,"textAlign","center"),Object(w.a)(t,"marginTop",20),Object(w.a)(t,"backgroundColor","#ff0c00f0"),Object(w.a)(t,"padding",5),Object(w.a)(t,"color","white"),Object(w.a)(t,"borderRadius",5),t),isMultipleOptionsModalContainer:{margin:"40px 20px 45px 20px",display:"grid","grid-column-gap":15,"grid-row-gap":30,"grid-template-columns":"1fr 1fr","place-self":"center",textAlign:"center",padding:0,"@media screen and (max-width: 475px)":{"grid-template-columns":"none","& > *:first-child":{marginBottom:40},margin:"20px 15px 25px 15px","grid-row-gap":20}},modalTypesBtns:Object(w.a)({display:"grid",width:"100%","place-self":"center",textAlign:"center",color:"#575757",borderRadius:0,borderBottom:"1px solid #ff7600",backgroundColor:"#f9f9f9",minWidth:180,"@media screen and (max-width: 475px)":{minWidth:"80%"},border:"1px solid #ebebeb","border-top-right-radius":7,"border-top-left-radius":7,paddingBottom:0,paddingLeft:0,paddingRight:0},"borderBottom","none"),typeText:{paddingLeft:11,paddingRight:11,paddingBottom:5},modalTypesTexts:(a={width:"100%",color:"white",fontSize:11,textAlign:"center",backgroundColor:"#ff5e00",position:"absolute",bottom:-20},Object(w.a)(a,"width","100%"),Object(w.a)(a,"border","1px solid #ebebeb"),Object(w.a)(a,"marginLeft",-1),a),modalTypesIcons:{fontSize:42,color:"#ff7600"},priceOrderContainer:{"& p":{display:"grid",gridTemplateColumns:"70% 30%","border-bottom":"1px dashed #ccc","& span:last-child":{textAlign:"right"}},"@media screen and (max-width: 350px)":{marginTop:40}},formButtons:{display:"contents",padding:"3px 8px",fontSize:"12px !important"},changePaymentInstrumentButton:{width:"100%",background:"#e7e7e7",marginBottom:10}}},La=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).getQrReader=function(){return r.a.createElement(ca.a,{ref:"qrReader1",delay:a.state.scanDelay,onError:a.props.handleScanError,onScan:a.props.handleScan,style:{width:"100%"}})},a.state={scanDelay:500,scanLegacyMode:!1},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(ia.a,{fullWidth:!0,maxWidth:"xs",open:this.props.isOpened,onClose:this.props.onClose,"aria-labelledby":"max-width-dialog-title",TransitionComponent:ma.a,"data-class":"dialog-container"},r.a.createElement(r.a.Fragment,null,r.a.createElement(ra.a,{in:!0,timeout:{enter:385,exit:190}},r.a.createElement(Ta.a,{style:{margin:0}},this.getQrReader()))))}}]),t}(l.Component),Pa=Object(sa.a)(Ma)(Object(E.c)(function(e,t){return{translations:e.lang.translations}},{})(La)),Fa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ia.a,{fullWidth:!0,maxWidth:"xs",open:this.props.isOpened,onClose:this.props.onClose,"aria-labelledby":"max-width-dialog-title",TransitionComponent:ma.a,"data-class":"dialog-container"},r.a.createElement(r.a.Fragment,null,r.a.createElement(ra.a,{in:!0,timeout:{enter:385,exit:190}},r.a.createElement(Ta.a,{style:{margin:0}},r.a.createElement("div",{style:{margin:10}},r.a.createElement("textarea",{name:"visitComment",className:"form-control",onChange:this.props.onChange,placeholder:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u043a\u044a\u043c \u0437\u0430\u0434\u0430\u0447\u0430\u0442\u0430"},this.props.visitComment)),r.a.createElement("div",{style:{textAlign:"center",margin:10}},r.a.createElement("button",{className:"btn btn-primary ",type:"submit",onClick:function(){return e.props.onSubmitComment()}},"\u041f\u0440\u043e\u0434\u044a\u043b\u0436\u0438"))))))}}]),t}(l.Component),Da=Object(sa.a)(Ma)(Object(E.c)(function(e,t){return{translations:e.lang.translations}},{})(Fa)),Ra=function(e){Object(l.useRef)();return r.a.createElement("div",{className:"col-sm-6 col-md-4 col-lg-4",style:{padding:"0 7px"}},r.a.createElement("div",{className:"card",style:{borderRadius:11}},r.a.createElement("div",{className:"card-body p-0 ",style:{background:(e.task,"white"),borderRadius:11}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12",style:{padding:"5px 5px 15px 5px"}},r.a.createElement("div",{style:{textAlign:"center"}},e.task.name?r.a.createElement(r.a.Fragment,null,e.task.name," ",r.a.createElement("br",null)):null)),r.a.createElement("div",{className:"col-md-6 col-sm-12",style:{textAlign:"center"}},r.a.createElement("b",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435: "),r.a.createElement("br",null),e.task.description?r.a.createElement(r.a.Fragment,null,e.task.description," ",r.a.createElement("br",null)):"-"),r.a.createElement("div",{className:"col-md-6 col-sm-12",style:{textAlign:"center"}},r.a.createElement("b",null,"\u041b\u043e\u043a\u0430\u0446\u0438\u044f: "),r.a.createElement("br",null),e.task.checkpoint?r.a.createElement(r.a.Fragment,null,e.task.checkpoint.name," ",r.a.createElement("br",null)):null)),r.a.createElement("br",null),1==e.task.times_per_day_of_task_execution?r.a.createElement(r.a.Fragment,null,0==e.task.completed?r.a.createElement("button",{className:" btn btn-primary",type:"submit",onClick:function(){return e.onCompleteTask(e.task.id)},style:{width:"100%"}},e.translations.tasks.complete_tasks):r.a.createElement("button",{className:" btn btn-success",disabled:!0,type:"submit",style:{width:"100%"}},e.translations.tasks.completed)):r.a.createElement(r.a.Fragment,null,e.task.visits&&e.task.visits.length<e.task.times_per_day_of_task_execution?r.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:function(){return e.onCompleteTask(e.task.id)},style:{width:"100%"}},e.translations.tasks.complete_tasks," ( ",e.task.visits.length," / ",e.task.times_per_day_of_task_execution,")"):r.a.createElement("button",{className:" btn btn-success",disabled:!0,type:"submit",style:{width:"100%"}},e.translations.tasks.completed," (",e.task.visits&&e.task.visits.length||0," / ",e.task.times_per_day_of_task_execution,")")))))},Ua=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.handlePageChange=function(e){a.props.dispatch(Object(y.push)("/admin/checkpoints/"+a.props.checkpointId+"/tasks?page="+e))},a.onCompleteTask=function(e){console.log(e),a.setState({commentModalOpened:!0,taskIdToComplete:e})},a.onSubmitComment=function(){a.setState({scanModalOpened:!0,commentModalOpened:!1})},a.handleScan=function(e){if(e&&0==a.state.scanned){a.setState({scanned:!0});var t={token:e,taskId:a.state.taskIdToComplete,comment:a.state.visitComment};a.props.createVisit(t).then(function(e){console.log(e),a.setState({scanModalOpened:!1,commentModalOpened:!1,scanned:!1,visitComment:""}),a.props.listUserTasks(),a.props.addSuccessMessage("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043f\u044a\u043b\u043d\u0438\u0445\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0430\u0442\u0430")}).catch(function(e){a.props.addErrorMessages(e),a.setState({scanModalOpened:!1,commentModalOpened:!1,scanned:!1})})}},a.handleScanError=function(e){console.error(e)},a.state={scanned:!1,scanModalOpened:!1,taskIdToComplete:null,commentModalOpened:!1,visitComment:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listUserTasks(),this.props.listCheckpoints()}},{key:"render",value:function(){var e=this,t=this.props.tasks,a=Object.keys(t).length,n=this.props.page,s=8*(n-1),l=0;return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"}),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement(Pe,null),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},Object.values(t).map(function(t,a){if(a>=s&&l<8)return l++,r.a.createElement(Ra,{key:t.id,onCompleteTask:e.onCompleteTask,task:t,deleteTask:e.deleteTask,translations:e.props.translations})})),r.a.createElement(Pa,{isOpened:this.state.scanModalOpened,onClose:function(){return e.setState({scanModalOpened:!1})},onError:this.props.onError,handleScanError:this.handleScanError,handleScan:this.handleScan}),r.a.createElement(Da,{isOpened:this.state.commentModalOpened,onClose:function(){return e.setState({commentModalOpened:!1})},onSubmitComment:this.onSubmitComment,onChange:this.onChange,visitComment:this.state.visitComment}),r.a.createElement(le.a,{className:"pagination",itemClass:"page-item",activePage:n,activeClass:"active",linkClass:"page-link",prevPageText:"<",nextPageText:">",firstPageText:"<<",lastPageText:">>",itemsCountPerPage:8,totalItemsCount:a,pageRangeDisplayed:5,onChange:this.handlePageChange}))))))))}}]),t}(l.Component),Ba=Object(E.c)(function(e,t){t.match.params.token;return{tasks:e.tasks.tasks||[],tasksForCheckpoint:[],page:Number(e.router.location.query.page)||1,translations:e.lang}},function(e,t){return Object(N.a)({dispatch:e},Object(v.b)({listCheckpoints:ya,addEditCheckpoint:ka,openConfirmModal:Na,addErrorMessages:ge,addSuccessMessage:be,listUserTasks:ea,createVisit:Aa},e))})(Ua),Wa=a(224),Ya=a.n(Wa),qa=a(365);var Ha=function(e){return r.a.createElement("tr",{key:e.checkpoint.id},r.a.createElement("td",null,e.checkpoint.name),r.a.createElement("td",null,r.a.createElement(ne.a,{to:"/admin/checkpoints/edit/"+e.checkpoint.id},r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button"},r.a.createElement("i",{className:"fas fa-edit",title:"\u041f\u0440\u043e\u043c\u044f\u043d\u0430"}))),r.a.createElement(ne.a,{to:"/admin/checkpoints/"+e.checkpoint.id+"/tasks"},r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button"},r.a.createElement("i",{className:"fas fa-list",rel:"tooltip",title:"\u0417\u0430\u0434\u0430\u0447\u0438 \u0437\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u044f\u0442\u0430"}))),r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button","data-toggle":"modal","data-target":"#dangerModal"+e.checkpoint.id},r.a.createElement("i",{className:"fas fa-trash",title:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u044f\u0442\u0430"})),r.a.createElement(ga,{id:e.checkpoint.id,title:e.checkpoint.name,deleteFunc:e.deleteCheckpoint})))},Ga=(ja.a.ExcelFile,ja.a.ExcelFile.ExcelSheet,ja.a.ExcelFile.ExcelColumn,new Ia.a(he)),za=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).deleteCheckpoint=function(e,t){e.preventDefault();var n={id:t,deleted:1};a.props.addEditCheckpoint(n).then(function(e){a.props.listCheckpoints(),a.props.addSuccessMessage("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u0442\u0440\u0438\u0445\u0442\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u044f")}).catch(function(e){a.props.addErrorMessages(e.response.data.error.errors)})},a.handlePageChange=function(e){a.props.dispatch(Object(y.push)("/admin/checkpoints?page="+e))},a.onChangeCheckboxIsForReservation=function(e,t){var n={id:t,is_for_reservation:e.target.checked};a.props.editCheckpoint(t,n)},a.downloadAll=Object(qa.a)(Ya.a.mark(function e(){var t,n;return Ya.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){return new Promise(function(t){return setTimeout(t,e)})},n=0;case 2:if(!(n<Object.keys(a.props.checkpoints).length)){e.next=10;break}return e.next=5,t(500);case 5:Ga.update({data:me+Object.values(a.props.checkpoints)[n].token}),Ga.download({extension:"png",name:Object.values(a.props.checkpoints)[n].name});case 7:n++,e.next=2;break;case 10:case"end":return e.stop()}},e)})),a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listCheckpoints()}},{key:"render",value:function(){var e=this,t=this.props.checkpoints,a=Object.keys(t).length,n=this.props.page,s=8*(n-1),l=0,o=[];return Object.values(this.props.checkpoints).map(function(e){return o.push({url:e.url,checkpoint_num:e.checkpoint_num})}),r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.checkpoints.title),r.a.createElement("li",{className:"breadcrumb-menu d-md-down-none"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Button group"},r.a.createElement("button",{className:"btn",type:"button",onClick:function(){return e.props.openConfirmModal("WARNING: This will download all QR codes as images. Are you sure you want to continue? / We advise you to edit the browser settings and allow autosave / \u0412\u041d\u0418\u041c\u0410\u041d\u0418\u0415: \u0422\u043e\u0432\u0430 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0449\u0435 \u0441\u0432\u0430\u043b\u0438 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0444\u0430\u0439\u043b\u043e\u0432\u0435 - \u0432\u0441\u0438\u0447\u043a\u0438 QR \u043a\u043e\u0434\u043e\u0432\u0435 \u043d\u0430 \u043c\u0430\u0441\u0438\u0442\u0435. \u0421\u0438\u0433\u0443\u0440\u043d\u0438 \u043b\u0438 \u0441\u0442\u0435 \u0447\u0435 \u0438\u0441\u043a\u0430\u0442\u0435 \u0434\u0430 \u043f\u0440\u043e\u0434\u044a\u043b\u0436\u0438\u0442\u0435 ? \u0410\u043a\u043e \u0434\u0430, \u0432\u0438 \u0441\u044a\u0432\u0435\u0442\u0432\u0430\u043c\u0435 \u043f\u044a\u0440\u0432\u043e \u0434\u0430 \u043f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438\u0442\u0435 \u043d\u0430 \u0431\u0440\u0430\u0443\u0437\u044a\u0440\u0430 \u0438 \u0434\u0430 \u043f\u043e\u0437\u0432\u043e\u043b\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u043d\u043e \u0441\u0432\u0430\u043b\u044f\u043d\u0435! ",function(){return e.downloadAll()},function(){})}},r.a.createElement("i",{className:"fas fa-download"})," \xa0 ",this.props.translations.common.download),r.a.createElement(ne.a,{to:"/admin/checkpoints/add",className:"btn"},r.a.createElement("i",{className:"fas fa-plus"})," \xa0 ",this.props.translations.checkpoints.add)))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement(Pe,null),r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table table-responsive-sm table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,this.props.translations.common.name),r.a.createElement("th",null,this.props.translations.common.action))),r.a.createElement("tbody",null,Object.values(t).map(function(t,a){if(a>=s&&l<8)return l++,r.a.createElement(Ha,{key:t.id,checkpoint:t,deleteCheckpoint:e.deleteCheckpoint,translations:e.props.translations,onChangeCheckboxIsForReservation:e.onChangeCheckboxIsForReservation})}))),r.a.createElement(le.a,{className:"pagination",itemClass:"page-item",activePage:n,activeClass:"active",linkClass:"page-link",prevPageText:"<",nextPageText:">",firstPageText:"<<",lastPageText:">>",itemsCountPerPage:8,totalItemsCount:a,pageRangeDisplayed:5,onChange:this.handlePageChange}))))))))}}]),t}(l.Component),Qa=Object(E.c)(function(e){return{checkpoints:e.checkpoints.checkpoints,page:Number(e.router.location.query.page)||1,translations:e.lang}},function(e,t){return Object(N.a)({dispatch:e},Object(v.b)({listCheckpoints:ya,addEditCheckpoint:ka,openConfirmModal:Na,addErrorMessages:ge,addSuccessMessage:be},e))})(za),Ja=(a(680),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).ref=r.a.createRef(),a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){0==this.props.isAdding&&this.props.checkpointQRCode.append(this.ref.current)}},{key:"componentWillReceiveProps",value:function(){0==this.props.isAdding&&this.props.checkpointQRCode.append(this.ref.current)}},{key:"render",value:function(){var e=this.props,t="";0==e.isAdding&&(t=me+e.checkpoint.token,this.props.checkpointQRCode.update({data:t}),console.log("UPDATING ",t,e.token));var a=0==e.isAdding?r.a.createElement("button",{className:"btn btn-default",onClick:e.generateNewQrCode},e.translations.checkpoints.generate_qr):null;return console.log("ADD ",e),r.a.createElement("form",null,r.a.createElement("div",{className:"card-body"},r.a.createElement(Pe,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.common.name),r.a.createElement("input",{className:"form-control",id:"name",type:"text",title:"latin",placeholder:e.translations.common.name,name:"name",onChange:e.onChange,value:e.checkpoint.name})))),""!=e.token?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"checkpoint-qr-code2",ref:this.ref})):null,a,""!=e.checkpointNum&&0==e.isAdding?r.a.createElement("a",{onClick:e.downloadQr,className:"btn btn-default"}," Download QR "):"",r.a.createElement("div",{className:"row"}),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("div",{className:"form-actions"},1==e.isAdding?"":r.a.createElement("button",{className:"btn btn-danger mright10",type:"button","data-toggle":"modal","data-target":"#dangerModal"+e.checkpointId}," ",e.translations.common.delete),r.a.createElement(ga,{checkpointId:e.checkpointId,checkpointNum:e.checkpointNum,deleteCheckpoint:e.deleteCheckpoint,translations:e.translations}),r.a.createElement(ne.a,{to:"/admin/checkpoints"},r.a.createElement("button",{className:"btn btn-secondary",type:"button"},e.translations.common.cancel)),r.a.createElement("button",{className:"fright btn btn-primary",type:"submit",onClick:e.onSubmit},1==e.isAdding?e.translations.common.add:e.translations.common.save))))}}]),t}(l.Component)),Va=a(796),Ka=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.onChangeCheckbox=function(e){a.setState(Object(w.a)({},e.target.name,e.target.checked))},a.onChangeSelectAutocomplete=function(e,t){a.setState(Object(w.a)({},e,t))},a.onFieldChange=function(e,t){a.setState(Object(w.a)({},e,t))},a.onSubmit=function(e){e.preventDefault();var t=a.validate();t.length>0?a.props.addErrorMessages(t):a.props.addEditCheckpoint({name:a.state.name}).then(function(e){a.props.history.push("/admin/checkpoints"),a.props.addSuccessMessage("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u044a\u0437\u0434\u0430\u0432\u0430\u043d\u0435 \u043d\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u044f")}).catch(function(e){a.props.addErrorMessages(e.response.data.error.errors)})},a.state={name:"",currentDate:+new Date},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"validate",value:function(){var e=[];return 0==this.state.name.length&&e.push(this.props.translations.messages.errors.invalid_name),e}},{key:"render",value:function(){return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/checkpoints"},this.props.translations.checkpoints.title)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.checkpoints.add),r.a.createElement("li",{className:"breadcrumb-menu d-md-down-none"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Button group"}))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(Ja,{onSubmit:this.onSubmit,onChange:this.onChange,checkpoint:this.state,currentDate:this.state.currentDate,isAdding:1,translations:this.props.translations})))))))}}]),t}(l.Component),Xa=Object(Va.a)(Object(E.c)(function(e){return{translations:e.lang,clients:e.clients.clients,places:e.places.places}},{addEditCheckpoint:ka,addErrorMessages:ge,addSuccessMessage:be})(Ka)),Za=(a(312),new Ia.a(he)),$a=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.onChangeCheckbox=function(e){a.setState(Object(w.a)({},e.target.name,e.target.checked))},a.onChangeSelectAutocomplete=function(e,t){a.setState(Object(w.a)({},e,t))},a.onFieldChange=function(e,t){a.setState(Object(w.a)({},e,t))},a.onSubmit=function(e){e.preventDefault();var t={id:a.state.id,name:a.state.name};a.props.addEditCheckpoint(t).then(function(e){a.props.history.push("/admin/checkpoints"),a.props.addSuccessMessage("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u044f")}).catch(function(e){a.props.addErrorMessages(e.response.data.error.errors)})},a.deleteCheckpoint=function(e,t){e.preventDefault(),a.props.removeCheckpoint(t,a.props.history)},a.generateNewQrCode=function(e){e.preventDefault();new FormData;a.props.addEditCheckpoint({id:a.state.id,token:"token_to_be_changed"}).then(function(e){a.props.addSuccessMessage("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u044f"),a.props.listCheckpoints()}).catch(function(e){a.props.addErrorMessages(e.response.data.error.errors)})},a.downloadQR=function(){Za.download({extension:"png",name:a.state.name})},a.state={id:a.props.match.params.id,name:a.props.checkpoint.name?a.props.checkpoint.name:"",token:a.props.checkpoint.token?a.props.checkpoint.token:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({id:e.match.params.id,name:e.checkpoint.name?e.checkpoint.name:"",token:e.checkpoint.token?e.checkpoint.token:""})}},{key:"componentWillMount",value:function(){this.props.listCheckpoints()}},{key:"validate",value:function(){var e=[];return 0==this.state.name.length&&e.push(this.props.translations.messages.errors.invalid_name),e}},{key:"render",value:function(){return console.log("STATE ",this.state),r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/checkpoints"},this.props.translations.checkpoints.title)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.checkpoints.edit),r.a.createElement("li",{className:"breadcrumb-menu d-md-down-none"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Button group"}))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(Ja,{onSubmit:this.onSubmit,onChange:this.onChange,onChangeCheckbox:this.onChangeCheckbox,onFieldChange:this.onFieldChange,checkpoint:this.state,qrCodeImage:this.state.qr_code_image,placeInUrl:this.state.place_in_url,currentDate:this.state.currentDate,deleteCheckpoint:this.deleteCheckpoint,actionText:"\u0417\u0430\u043f\u0430\u0437\u0438",isAdding:0,translations:this.props.translations,generateNewQrCode:this.generateNewQrCode,downloadQr:this.downloadQR,currPlaceOrderTypes:this.props.currPlaceOrderTypes,checkpointQRCode:Za})))))))}}]),t}(l.Component),en=Object(E.c)(function(e,t){var a=t.match.params.id,n=[];if(e.places.places){var s=e.places.places.find(function(e){return e.id==Ne.getUserPlace()});s&&(n=s.ordertypes)}var l=e.checkpoints.checkpoints[a];return l||(l={id:"",checkpoint_num:"",qr_code_image:"",active:"",place_in_url:"",checkpoint_token:"",ordertypes:[]}),{checkpoint:l,checkpoints:e.checkpoints,currPlaceOrderTypes:n,errors:e.checkpoints.errors,translations:e.lang,clients:e.clients.clients,places:e.places.places}},{listCheckpoints:ya,addEditCheckpoint:ka,removeCheckpoint:function(e,t){return function(a){oe.a.put(de+"tables/"+e,{deleted:!0}).then(function(e){t?t.push("/admin/tables"):(a(ya()),a(be("Success deleting table")))}).catch(function(e){a(ge(e.response.data.error.errors))})}},addErrorMessages:ge,addSuccessMessage:be})($a),tn=function(e){return r.a.createElement("tr",{key:e.task.id},r.a.createElement("td",null,e.task.name),r.a.createElement("td",null,e.task.description),r.a.createElement("td",null,e.task.rotation_start_date&&nt()(e.task.rotation_start_date).format("D-M-Y")||""),r.a.createElement("td",null,e.task.rotation_days_count),r.a.createElement("td",null,e.task.times_per_day_of_task_execution),r.a.createElement("td",null,r.a.createElement(ne.a,{to:"/admin/"+"checkpoints/".concat(e.checkpointId,"/tasks/").concat(e.task.id,"/edit")},r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button"},r.a.createElement("i",{className:"fas fa-edit",title:"\u041f\u0440\u043e\u043c\u044f\u043d\u0430"}))),r.a.createElement("button",{className:"btn btn-pill btn-link",type:"button","data-toggle":"modal","data-target":"#dangerModal"+e.task.id},r.a.createElement("i",{className:"fas fa-trash",title:"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0430"})),r.a.createElement(ga,{id:e.task.id,title:e.task.name,deleteFunc:e.deleteTask})))},an=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).deleteTask=function(e,t){e.preventDefault();var n={id:t,deleted:1};a.props.addEditTask(n).then(function(e){a.props.listAllTasks(),a.props.addSuccessMessage("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u0442\u0440\u0438\u0445\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0430")}).catch(function(e){a.props.addErrorMessages(e.response.data.error.errors)})},a.handlePageChange=function(e){a.props.dispatch(Object(y.push)("/admin/checkpoints/"+a.props.checkpointId+"/tasks?page="+e))},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listAllTasks(),this.props.listCheckpoints()}},{key:"render",value:function(){var e=this,t=this.props.tasksForCheckpoint,a=Object.keys(t).length,n=this.props.page,s=8*(n-1),l=0;return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/checkpoints"},this.props.translations.checkpoints.title)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.checkpoint&&this.props.checkpoint.name||""),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.checkpoints.tasks_for_checkpoint),r.a.createElement("li",{className:"breadcrumb-menu d-md-down-none"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Button group"},r.a.createElement(ne.a,{to:"/admin/"+"checkpoints/".concat(this.props.checkpointId,"/tasks/add"),className:"btn"},r.a.createElement("i",{className:"fas fa-plus"})," \xa0 ",this.props.translations.checkpoints.add_task)))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement(Pe,null),r.a.createElement("div",{className:"card-body"},r.a.createElement("table",{className:"table table-responsive-sm table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,this.props.translations.common.name),r.a.createElement("th",null,this.props.translations.tasks.description),r.a.createElement("th",null,this.props.translations.tasks.rotation_start_date),r.a.createElement("th",null,this.props.translations.tasks.rotation_days_count),r.a.createElement("th",null,this.props.translations.tasks.times_per_day_of_task_execution),r.a.createElement("th",null,this.props.translations.common.action))),r.a.createElement("tbody",null,Object.values(t).map(function(t,a){if(a>=s&&l<8)return l++,r.a.createElement(tn,{key:t.id,checkpointId:e.props.checkpointId,task:t,deleteTask:e.deleteTask,translations:e.props.translations})}))),r.a.createElement(le.a,{className:"pagination",itemClass:"page-item",activePage:n,activeClass:"active",linkClass:"page-link",prevPageText:"<",nextPageText:">",firstPageText:"<<",lastPageText:">>",itemsCountPerPage:8,totalItemsCount:a,pageRangeDisplayed:5,onChange:this.handlePageChange}))))))))}}]),t}(l.Component),nn=Object(E.c)(function(e,t){var a=t.match.params.id,n=Object.values(e.tasks.tasks).filter(function(e){return e.checkpointId==a});return{checkpointId:a,checkpoint:e.checkpoints.checkpoints[a]||null,tasksForCheckpoint:n,page:Number(e.router.location.query.page)||1,translations:e.lang}},function(e,t){return Object(N.a)({dispatch:e},Object(v.b)({listCheckpoints:ya,addEditCheckpoint:ka,openConfirmModal:Na,addErrorMessages:ge,addSuccessMessage:be,listAllTasks:$t,addEditTask:ta},e))})(an),sn=function(e){function t(e){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(){}},{key:"render",value:function(){var e=this.props,t=[];return Object.values(e.users).map(function(e){t.push({value:e.id,label:e.email})}),r.a.createElement("form",null,r.a.createElement("div",{className:"card-body"},r.a.createElement(Pe,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.common.name),r.a.createElement("input",{className:"form-control",id:"name",type:"text",title:"latin",placeholder:e.translations.common.name,name:"name",onChange:e.onChange,value:e.task.name}))),r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.common.description),r.a.createElement("input",{className:"form-control",id:"description",type:"text",title:"latin",placeholder:e.translations.tasks.description,name:"description",onChange:e.onChange,value:e.task.description}))),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.tasks.rotation_start_date),r.a.createElement("br",null),r.a.createElement(Qt.a,{className:"form-control vertical-center",selected:e.task.rotation_start_date,onChange:function(t){return e.onFieldChange("rotation_start_date",t)},dateFormat:"d-M-Y",style:{display:"block"}}))),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.tasks.rotation_days_count),r.a.createElement("input",{className:"form-control",id:"name",type:"text",title:"latin",placeholder:e.translations.common.rotation_days_count,name:"rotation_days_count",onChange:e.onChange,value:e.task.rotation_days_count}))),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},e.translations.tasks.times_per_day_of_task_execution),r.a.createElement("input",{className:"form-control",id:"times_per_day_of_task_execution",type:"text",placeholder:e.translations.tasks.times_per_day_of_task_execution,name:"times_per_day_of_task_execution",onChange:e.onChange,value:e.task.times_per_day_of_task_execution}))),r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"parentId"},e.translations.tasks.users),r.a.createElement(Fe.a,{value:e.task.users,isMulti:!0,name:"colors",options:t,className:"basic-multi-select",classNamePrefix:"select",onChange:function(t){return e.onChangeSelectAutocomplete("users",t)}})))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("div",{className:"form-actions"},1==e.isAdding?"":r.a.createElement("button",{className:"btn btn-danger mright10",type:"button","data-toggle":"modal","data-target":"#dangerModal"+e.checkpointId}," ",e.translations.common.delete),r.a.createElement(ga,{checkpointId:e.checkpointId,checkpointNum:e.checkpointNum,deleteCheckpoint:e.deleteCheckpoint,translations:e.translations}),r.a.createElement(ne.a,{to:"/admin/checkpoints"},r.a.createElement("button",{className:"btn btn-secondary",type:"button"},e.translations.common.cancel)),r.a.createElement("button",{className:"fright btn btn-primary",type:"submit",onClick:e.onSubmit},1==e.isAdding?e.translations.common.add:e.translations.common.save))))}}]),t}(l.Component),ln=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.onChangeCheckbox=function(e){a.setState(Object(w.a)({},e.target.name,e.target.checked))},a.onChangeSelectAutocomplete=function(e,t){a.setState(Object(w.a)({},e,t))},a.onFieldChange=function(e,t){a.setState(Object(w.a)({},e,t))},a.onSubmit=function(e){e.preventDefault();var t=a.state.users.map(function(e){return e.value}),n={name:a.state.name,description:a.state.description,rotation_start_date:a.state.rotation_start_date,rotation_days_count:a.state.rotation_days_count,times_per_day_of_task_execution:a.state.times_per_day_of_task_execution,checkpointId:a.props.checkpointId,usersIds:t};a.props.addEditTask(n).then(function(e){a.props.history.push("/admin/checkpoints/".concat(a.props.checkpointId,"/tasks")),a.props.addSuccessMessage("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u044a\u0437\u0434\u0430\u0432\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0430 \u0437\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u044f")}).catch(function(e){a.props.addErrorMessages(e.response.data.error.errors)})},a.state={name:"",description:"",rotation_start_date:nt()().toDate(),rotation_days_count:1,times_per_day_of_task_execution:1,users:[]},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listCheckpoints(),this.props.listUsers()}},{key:"validate",value:function(){var e=[];return 0==this.state.name.length&&e.push(this.props.translations.messages.errors.invalid_name),e}},{key:"render",value:function(){return console.log(this.state),r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/checkpoints"},this.props.translations.checkpoints.title)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.checkpoint&&this.props.checkpoint.name||""),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"+"checkpoints/".concat(this.props.checkpointId,"/tasks")},this.props.translations.checkpoints.tasks_for_checkpoint)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.checkpoints.add_task)),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(sn,{onSubmit:this.onSubmit,onChange:this.onChange,onChangeCheckbox:this.onChangeCheckbox,onChangeSelectAutocomplete:this.onChangeSelectAutocomplete,onFieldChange:this.onFieldChange,task:this.state,users:this.props.users,currentDate:this.state.currentDate,actionText:"\u0414\u043e\u0431\u0430\u0432\u0438",isAdding:1,translations:this.props.translations})))))))}}]),t}(l.Component),rn=Object(Va.a)(Object(E.c)(function(e,t){var a=t.match.params.id;return{checkpointId:a,checkpoint:e.checkpoints.checkpoints[a]||null,users:e.users.users||[],translations:e.lang,clients:e.clients.clients,places:e.places.places}},{addEditCheckpoint:ka,listCheckpoints:ya,addErrorMessages:ge,addSuccessMessage:be,addEditTask:ta,listUsers:Ue})(ln)),on=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState(Object(w.a)({},e.target.name,e.target.value))},a.onChangeCheckbox=function(e){a.setState(Object(w.a)({},e.target.name,e.target.checked))},a.onChangeSelectAutocomplete=function(e,t){a.setState(Object(w.a)({},e,t))},a.onFieldChange=function(e,t){a.setState(Object(w.a)({},e,t))},a.onSubmit=function(e){e.preventDefault();var t=a.validate();if(t.length>0)a.props.addErrorMessages(t);else{var n=a.state.users.map(function(e){return e.value}),s={id:a.state.id,name:a.state.name,description:a.state.description,rotation_start_date:a.state.rotation_start_date,rotation_days_count:a.state.rotation_days_count,times_per_day_of_task_execution:a.state.times_per_day_of_task_execution,checkpointId:a.props.checkpointId,usersIds:n};a.props.addEditTask(s).then(function(e){a.props.history.push("/admin/checkpoints/".concat(a.props.checkpointId,"/tasks")),a.props.addSuccessMessage("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u044a\u0437\u0434\u0430\u0432\u0430\u043d\u0435 \u043d\u0430 \u0437\u0430\u0434\u0430\u0447\u0430 \u0437\u0430 \u043b\u043e\u043a\u0430\u0446\u0438\u044f")}).catch(function(e){a.props.addErrorMessages(e.response.data.error.errors)})}},a.state={name:"",description:"",rotation_start_date:"",rotation_days_count:"",times_per_day_of_task_execution:"",users:[]},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.listCheckpoints(),this.props.listUsers(),this.props.listAllTasks()}},{key:"componentWillReceiveProps",value:function(e){var t=[];e.task.users.length>0&&e.task.users.map(function(e){t.push({value:parseInt(e.id),label:e.email})}),this.setState({id:e.match.params.taskId,name:e.task.name?e.task.name:"",description:e.task.ndescriptioname?e.task.description:"",rotation_start_date:e.task.rotation_start_date&&nt()(e.task.rotation_start_date).toDate()||"",rotation_days_count:e.task.rotation_days_count?e.task.rotation_days_count:"",times_per_day_of_task_execution:e.task.times_per_day_of_task_execution?e.task.times_per_day_of_task_execution:"",users:t}),console.log("NEXT ",e)}},{key:"validate",value:function(){var e=[];return 0==this.state.name.length&&e.push(this.props.translations.messages.errors.invalid_name),e}},{key:"render",value:function(){return r.a.createElement("main",{className:"main"},r.a.createElement("ol",{className:"breadcrumb"},r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"},this.props.translations.common.dashboard)),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/checkpoints"},this.props.translations.checkpoints.title)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.checkpoint&&this.props.checkpoint.name||""),r.a.createElement("li",{className:"breadcrumb-item"},r.a.createElement(ne.a,{to:"/admin/"+"checkpoints/".concat(this.props.checkpointId,"/tasks")},this.props.translations.checkpoints.tasks_for_checkpoint)),r.a.createElement("li",{className:"breadcrumb-item active"},this.props.translations.checkpoints.add_task)),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"animated fadeIn"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("div",{className:"card"},r.a.createElement(sn,{onSubmit:this.onSubmit,onChange:this.onChange,onChangeSelectAutocomplete:this.onChangeSelectAutocomplete,onFieldChange:this.onFieldChange,task:this.state,users:this.props.users,currentDate:this.state.currentDate,isAdding:0,translations:this.props.translations})))))))}}]),t}(l.Component),cn=Object(Va.a)(Object(E.c)(function(e,t){var a=t.match.params.id,n=t.match.params.taskId,s=e.tasks.tasks[n];return s||(s={id:n,name:"",description:"",rotation_start_date:"",rotation_days_count:"",times_per_day_of_task_execution:"",users:[]}),{task:s,checkpointId:a,checkpoint:e.checkpoints.checkpoints[a]||null,users:e.users.users||[],translations:e.lang,places:e.places.places}},{listCheckpoints:ya,addErrorMessages:ge,addSuccessMessage:be,addEditTask:ta,listUsers:Ue,listAllTasks:$t})(on)),mn=Object(E.c)(function(e,t){return{userRole:e.auth.user.role||null}},{})(function(e){return r.a.createElement(h.a,{history:$},r.a.createElement(g.a,null,r.a.createElement(b.a,{exact:!0,path:"/admin/login",component:kt}),r.a.createElement(Ot,{exact:!0,path:"/my-tasks",component:Ba}),r.a.createElement(Ot,{exact:!0,path:"/tasks/t/:token",component:wa}),r.a.createElement(Ot,{exact:!0,path:"/admin/tasks",component:ha}),r.a.createElement(Ot,{exact:!0,path:"/admin/tasks/add",component:fa}),r.a.createElement(Ot,{exact:!0,path:"/admin/tasks/edit/:id",component:_a}),r.a.createElement(Ot,{exact:!0,path:"/admin/checkpoints",component:Qa}),r.a.createElement(Ot,{exact:!0,path:"/admin/checkpoints/add",component:Xa}),r.a.createElement(Ot,{exact:!0,path:"/admin/checkpoints/edit/:id",component:en}),r.a.createElement(Ot,{exact:!0,path:"/admin/checkpoints/:id/tasks",component:nn}),r.a.createElement(Ot,{exact:!0,path:"/admin/checkpoints/:id/tasks/add",component:rn}),r.a.createElement(Ot,{exact:!0,path:"/admin/checkpoints/:id/tasks/:taskId/edit",component:cn}),r.a.createElement(Ot,{exact:!0,path:"/admin/places/current",component:Re}),r.a.createElement(Ot,{exact:!0,path:"/admin/places",component:wt}),r.a.createElement(Ot,{exact:!0,path:"/admin/places/add",component:Ft}),r.a.createElement(Ot,{exact:!0,path:"/admin/places/edit/:id",component:Bt}),r.a.createElement(Ot,{exact:!0,path:"/admin/clients",component:Gt}),r.a.createElement(Ot,{exact:!0,path:"/admin/clients/add",component:Kt}),r.a.createElement(Ot,{exact:!0,path:"/admin/clients/edit/:id",component:Zt}),r.a.createElement(Ot,{exact:!0,path:"/admin/users",component:Qe}),r.a.createElement(Ot,{exact:!0,path:"/admin/users/registered",component:pt}),r.a.createElement(Ot,{exact:!0,path:"/admin/users/add",component:bt}),r.a.createElement(Ot,{exact:!0,path:"/admin/users/edit/:id",component:ft})))}),dn=(a(686),Object(k.a)(),function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"loader-page-container",style:{display:this.props.isLoading?"block":"none"}}),r.a.createElement("div",{className:"loader loader-page",style:{visibility:this.props.isLoading?"visible":"hidden"}}))}}]),t}(l.Component)),pn=Object(E.c)(function(e,t){return{isLoading:e.loading.isLoading||!1}},{})(dn),un=a(787),hn=a(794),gn=a(777),bn=a(788),En=(a(786),Object(tt.a)(function(e){return{close:{padding:e.spacing(.5)}}}));function fn(e){En();return r.a.createElement("div",null,r.a.createElement(hn.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:e.snackbarText||!1,autoHideDuration:1e4,onClose:function(){return e.setSnackbarText(!1)},onExited:function(){return e.setSnackbarText(!1)},message:e.snackbarText,action:r.a.createElement(r.a.Fragment,null,r.a.createElement(un.a,{color:"secondary",size:"small",onClick:e.snackbarActionCallback},r.a.createElement("b",null,e.snackbarActionText)),r.a.createElement(gn.a,{"aria-label":"close",color:"inherit",onClick:function(){return e.setSnackbarText(!1)}},r.a.createElement(bn.a,null)))}))}var vn=a(789),_n=function(e){function t(e){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ia.a,{open:this.props.openConfirmModal,onClose:function(){e.props.confirmModalCallbackFail(),e.props.closeConfirmModal()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(la.a,null,r.a.createElement(Ta.a,{id:"alert-dialog-description"},this.props.confirmModalText)),r.a.createElement(vn.a,null,r.a.createElement(un.a,{onClick:function(){e.props.confirmModalCallbackFail(),e.props.closeConfirmModal()},color:"primary"},"\u041d\u0435"),r.a.createElement(un.a,{onClick:function(){e.props.confirmModalCallbackSuccess(),e.props.closeConfirmModal()},color:"primary",autoFocus:!0},"\u0414\u0430"))))}}]),t}(l.Component),yn=Object(E.c)(function(e,t){return{openConfirmModal:e.admin.openConfirmModal||!1,confirmModalText:e.admin.confirmModalText||"",confirmModalCallbackSuccess:e.admin.confirmModalCallbackSuccess||void 0,confirmModalCallbackFail:e.admin.confirmModalCallbackFail||void 0}},{closeConfirmModal:function(){return function(e){e({type:"CLOSE_CONFIRM_MODAL"})}}})(_n),kn=a(367),Nn=a.n(kn),Cn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).mySetLang=function(e){a.props.setLang(e)},a.state={rerender:!1,timerCheckForceRefresh:"",timeoutRefreshPage:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){if(e.settings){e.settings.logo&&e.settings.logo.value?(this.logoSrc=e.settings.logo.value,-1!==this.logoSrc.indexOf("http")?this.logoSrc=this.logoSrc:this.logoSrc=pe+this.logoSrc):e.settings.tabl_logo&&(this.logoSrc=e.settings.tabl_logo.value),e.settings.tabl_short_logo&&e.settings.tabl_short_logo.value?(this.shortLogoSrc=e.settings.tabl_short_logo.value,-1!==this.shortLogoSrc.indexOf("http")?this.shortLogoSrc=this.shortLogoSrc:this.shortLogoSrc=pe+this.shortLogoSrc):e.settings.tabl_logo&&(this.shortLogoSrc=e.settings.tabl_logo.value);var t=document.querySelector("link.favicon");t&&t.setAttribute("href",this.shortLogoSrc)}}},{key:"reqFullScreen",value:function(){var e=document.documentElement;e&&(e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen())}},{key:"stopFullScreen",value:function(){document.fullscreenElement&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen())}},{key:"render",value:function(){var e=this,t=this.props,a=t.places,n=t.clients,s="",l="",o="";a&&(o=(s=a.find(function(e){return e.id==Ne.getUserPlace()}))?s.name:"-",s&&Object.values(s).length>0&&s.clientId&&(l=n.find(function(e){return e.id==s.clientId})));l&&Object.keys(l).length>0&&l.slug&&l.slug;return r.a.createElement("header",{className:"app-header navbar"},r.a.createElement(pn,null),r.a.createElement(yn,null),r.a.createElement("button",{className:"navbar-toggler sidebar-toggler d-lg-none mr-auto",type:"button","data-toggle":"sidebar-show"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("a",{className:"navbar-brand logo-holder ",href:"javascript:void(0)"},r.a.createElement("h2",{className:"navbar-brand-full admin-logo",style:{fontSize:"3.75rem",marginLeft:33,maxHeight:70}},"HCS")),r.a.createElement(fn,{snackbarText:this.props.snackbarText,setSnackbarText:this.props.setSnackbarText,snackbarActionCallback:this.props.snackbarActionCallback,snackbarActionText:this.props.snackbarActionText}),r.a.createElement("ul",{className:"nav navbar-nav ml-auto"},Ne.hasAccess("SUPER_ADMIN")&&this.props.places.length>1?r.a.createElement("li",{className:"nav-item place-header"},r.a.createElement(ne.a,{to:"/admin/places/current",className:"nav-link"},r.a.createElement("span",{className:"badge badge-secondary fsize-13",style:{position:"initial"}},o))):null,"\xa0",r.a.createElement("li",null,r.a.createElement("button",{className:"btn",style:"en"==localStorage.getItem("default_lang")?{background:"#d8d8d8"}:{marginRight:5},onClick:function(){return e.props.changeLanguage("en")}},"EN"),r.a.createElement("button",{className:"btn",style:localStorage.getItem("default_lang")&&"bg"!=localStorage.getItem("default_lang")?{marginRight:5}:{background:"#d8d8d8"},onClick:function(){return e.props.changeLanguage("bg")}},"BG")),Ne.getToken()?r.a.createElement("li",{className:"nav-item dropdown show dropdownicons-black",style:{paddingRight:10}},r.a.createElement("a",{className:"nav-link dropdown-toggle","data-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement("img",{src:Nn.a,className:"img-avatar",alt:"user"})),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right ",style:{maxHeight:"90vh",overflowY:"scroll"}},r.a.createElement("div",{className:"dropdown-header text-center"},r.a.createElement("strong",null,Ne.getToken()?Ne.getDecodedUser().email:null," - ",Ne.getToken()?this.props.translations.roles[Ne.getDecodedUser().role]:null," - ",r.a.createElement("i",{className:"fas fa-lock c-pointer",title:"\u0418\u0437\u0445\u043e\u0434",onClick:this.props.logoutAction}))),r.a.createElement("div",{className:"dropdown-header text-center"},r.a.createElement("strong",null,"\u041f\u0440\u043e\u0444\u0438\u043b")),r.a.createElement("button",{className:"dropdown-item c-pointer",onClick:this.props.logoutAction},r.a.createElement("i",{className:"fas fa-lock"})," \u0418\u0437\u0445\u043e\u0434"))):null))}}]),t}(l.Component),On=Object(E.c)(function(e){return{clients:e.clients.clients,places:e.places.places,translations:e.lang,snackbarText:e.admin.snackbarText,snackbarActionCallback:e.admin.snackbarActionCallback,snackbarActionText:e.admin.snackbarActionText}},{changeLanguage:function(e){return localStorage.setItem("default_lang",e),{type:"SWITCH_LANGUAGE",language:e}},setSnackbarText:function(e){return function(t){t({type:"SET_SNACKBAR_TEXT",payload:e})}},openConfirmModal:Na})(Cn),jn=a(86),Sn=(new fe.a,function(e){function t(e){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){this.props.settings;var e=this.props.places.find(function(e){return e.id==Ne.getUserPlace()}),t=e?e.name:"-";e&&e.ordertypes;return r.a.createElement("div",{className:"sidebar"},r.a.createElement("nav",{className:"sidebar-nav"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"divider"}),Ne.hasAccess("USER")?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(ne.a,{to:"/my-tasks",className:"nav-link"},r.a.createElement("i",{className:"nav-icon "},r.a.createElement(jn.c,null))," ",this.props.translations.sidemenu.my_tasks))):null,Ne.hasAccessCustom(["PLACE_ADMIN","CLIENT_ADMIN","SUPER_ADMIN"])?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"divider"}),r.a.createElement("li",{className:"nav-title"},this.props.translations.sidemenu.admin),r.a.createElement("li",{className:"nav-item"},r.a.createElement(ne.a,{to:"/admin/tasks",className:"nav-link"},r.a.createElement("i",{className:"nav-icon "},r.a.createElement(jn.c,null))," ",this.props.translations.sidemenu.tasks)),r.a.createElement("li",{className:"nav-item"},r.a.createElement(ne.a,{to:"/admin/checkpoints",className:"nav-link"},r.a.createElement("i",{className:"nav-icon"},r.a.createElement(jn.b,null))," ",this.props.translations.sidemenu.checkpoints))):null,Ne.hasAccess("CLIENT_ADMIN")&&this.props.places.length>1?r.a.createElement("li",{className:"nav-item"},r.a.createElement(ne.a,{to:"/admin/places/current",className:"nav-link"},r.a.createElement("i",{className:"nav-icon "},r.a.createElement(jn.a,null)),"  ",this.props.translations.sidemenu.current_place," ",r.a.createElement("span",{className:"badge badge-secondary current-place-sidebar"},t))):null,Ne.hasAccess("PLACE_ADMIN")?r.a.createElement("li",{className:"nav-item"},r.a.createElement(ne.a,{to:"/admin/users",className:"nav-link"},r.a.createElement("i",{className:"nav-icon "},r.a.createElement(jn.d,null)),"   ",this.props.translations.sidemenu.users)):null,Ne.hasAccess("SUPER_ADMIN")?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"divider"}),r.a.createElement("li",{className:"nav-title"},this.props.translations.sidemenu.super_admin),r.a.createElement("li",{className:"nav-item"},r.a.createElement(ne.a,{to:"/admin/places",className:"nav-link"},r.a.createElement("i",{className:"nav-icon"},r.a.createElement(jn.a,null)),"  ",this.props.translations.sidemenu.places))):null)),r.a.createElement("button",{className:"sidebar-minimizer brand-minimizer",type:"button"}))}}]),t}(l.Component)),In=Object(E.c)(function(e){return{translations:e.lang,userRole:e.auth.user.role||"",places:e.places.places||[]}})(Sn),xn=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=Ne.getToken()?{}:{margin:"0"};return r.a.createElement("footer",{className:"app-footer",style:e},r.a.createElement("div",null,r.a.createElement("span",null,"\xa9 2021 All rights reserved.")),r.a.createElement("div",{className:"ml-auto"},r.a.createElement("span",null),r.a.createElement("span",null)))}}]),t}(l.Component),wn=a(368),An=a(225);wn.a.add(An.a,An.b);var Tn=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=Ne.isUserAuthenticated()?r.a.createElement(In,null):"";return r.a.createElement(r.a.Fragment,null,r.a.createElement(On,{logoutAction:Ae}),r.a.createElement("div",{className:"app-body"},e,r.a.createElement(mn,null)),r.a.createElement(xn,null))}}]),t}(l.Component);var Mn=new fe.a;if(oe.a.defaults.headers.common.Admin="1",oe.a.defaults.headers.common.tabl="tabl",Ne.getToken())try{var Ln=Oe()(Ne.getToken());ae.dispatch(Te(Ln)),we(Ne.getToken()),Mn.get("tabl_a_place")?ye(Mn.get("tabl_a_place")):ye(Ln.place_id),ae.dispatch(je()),ae.dispatch(Ee())}catch(Fn){}oe.a.interceptors.response.use(function(e){return e},function(e){if(!e.response||!e.response.status||401!=e.response.status)return Promise.reject(e);ae.dispatch(Ae())});$.listen(function(e,t){ae.dispatch(function(e){e({type:"CLEAR_MESSAGES"})})});var Pn=r.a.createElement(E.a,{store:ae},r.a.createElement(L.a,{history:$},r.a.createElement(Tn,null)));c.a.render(Pn,document.getElementById("root"))}},[[382,2,1]]]);
//# sourceMappingURL=main.52825c1b.chunk.js.map